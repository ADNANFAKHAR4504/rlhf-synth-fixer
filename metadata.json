{
  "task_id": "y2j4u0",
  "platform": "CDK",
  "language": "Python",
  "complexity": "expert",
  "category": "Application Deployment",
  "subcategory": "Web Application Deployment",
  "description": "Create a CDK Python program to optimize an existing payment processing infrastructure by refactoring inefficient resource allocations. The configuration must: 1. Analyze and resize Lambda functions from 3008MB to appropriate memory based on CloudWatch metrics (target: 512MB-1024MB). 2. Convert DynamoDB tables from provisioned to on-demand billing mode. 3. Consolidate duplicate API Gateway REST APIs into a single deployment. 4. Implement Lambda reserved concurrency limits to prevent throttling spikes. 5. Add lifecycle policies to S3 buckets to transition logs to Glacier after 30 days. 6. Configure CloudWatch Log Groups with 7-day retention instead of never-expire. 7. Replace NAT Gateways with NAT Instances for development environment. 8. Implement automatic scaling policies for ECS services based on CPU/memory metrics. 9. Add CloudWatch dashboards to monitor cost optimization metrics. 10. Generate cost comparison report showing before/after monthly estimates. Expected output: Optimized CDK Python code that reduces infrastructure costs by 40% while maintaining performance SLAs, with automated cost tracking and monitoring dashboards.",
  "user_story": "A fintech startup's payment processing infrastructure was hastily built during rapid growth, resulting in excessive costs and performance bottlenecks. The existing CDK code deploys redundant resources, uses oversized compute instances, and lacks proper resource tagging for cost allocation.",
  "technical_context": "Production payment processing infrastructure in us-east-1 region across 2 availability zones. Current setup includes oversized Lambda functions (3008MB memory), underutilized DynamoDB tables with provisioned capacity, and redundant API Gateway deployments. Environment requires Python 3.9+, AWS CDK 2.100.0+, and boto3. VPC spans 10.0.0.0/16 with public/subnets. AWS Organizations with consolidated billing enabled. Cost Explorer API access required for validation.",
  "constraints": [
    "Must maintain zero-downtime during the optimization deployment",
    "Total monthly AWS costs must be reduced by at least 40%",
    "All Lambda functions must use ARM-based Graviton2 processors",
    "Resource naming must follow pattern: {env}-{service}-{resource-type}-{identifier}",
    "Must implement cost allocation tags: Environment, Team, CostCenter, Project"
  ],
  "timestamp": "2025-11-20T03:56:00Z",
  "status": "completed",
  "training_quality": 8,
  "training_quality_rationale": "High-value training data. The model made a systematic architectural error (using instance variables instead of local variables in CDK Stack classes) that was subtle, framework-specific, and affected all 8 stack files. This demonstrates good learning value for understanding CDK synthesis patterns and variable scope. The error required CDK-specific knowledge to identify and fix. Score: 8/10 (+3 systematic architectural misunderstanding, +2 subtle/framework-specific, +2 requires CDK knowledge, +1 pattern consistency, -2 only one major error category).",
  "qa_completed": true,
  "qa_timestamp": "2025-11-20T04:58:00Z"
}
