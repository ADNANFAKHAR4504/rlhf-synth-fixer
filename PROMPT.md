# Task: Multi-Environment Consistency & Replication

## Description
Create a Pulumi TypeScript program to deploy a data processing infrastructure that can be replicated across multiple environments. The configuration must: 1. Define a reusable component that encapsulates S3 bucket, Lambda function, and DynamoDB table creation. 2. Accept environment name as a configuration parameter (dev, staging, or prod). 3. Create S3 buckets with environment-specific naming (e.g., data-processor-{env}-{random}). 4. Deploy Lambda functions that process S3 events with environment-specific memory allocation (dev: 512MB, staging: 1024MB, prod: 2048MB). 5. Set up DynamoDB tables with environment-specific capacity (dev: 5 RCU/WCU, staging: 10 RCU/WCU, prod: 25 RCU/WCU). 6. Configure Lambda environment variables to reference the correct DynamoDB table for each environment. 7. Implement S3 event notifications to trigger Lambda on object creation. 8. Apply consistent tagging across all resources with Environment and ManagedBy tags. 9. Create IAM roles with least-privilege policies for Lambda execution. 10. Enable CloudWatch Logs retention with environment-specific periods (dev: 7 days, staging: 14 days, prod: 30 days). Expected output: A Pulumi program that can be deployed to any environment by changing a single configuration value, producing identical infrastructure with environment-appropriate settings. Export the S3 bucket name, Lambda function ARN, and DynamoDB table name for each deployment.

## Scenario
A data analytics company needs to maintain identical data processing pipelines across development, staging, and production environments. Each environment requires the same Lambda functions, S3 buckets, and DynamoDB tables with environment-specific configurations to ensure consistent behavior during testing and deployment.

## Infrastructure Requirements
AWS infrastructure spanning three environments (dev, staging, prod) in ap-northeast-2 region. Utilizes S3 for data storage, Lambda for serverless compute with Node.js 18.x runtime, and DynamoDB for metadata storage. Requires Pulumi CLI 3.x with TypeScript/Node.js environment, AWS CLI configured with appropriate credentials. Each environment maintains isolation through separate AWS accounts or resource naming conventions.

## Constraints
["Use Pulumi's ComponentResource pattern to create reusable infrastructure components", "Lambda function code must be inline (not from external files) for simplicity", "All resource names must include a random suffix to avoid conflicts", "S3 buckets must have versioning enabled and block public access", "DynamoDB tables must use on-demand billing mode despite the specified RCU/WCU values", "Lambda functions must have a 60-second timeout across all environments", "Use Pulumi configuration system (not environment variables) for environment selection"]
