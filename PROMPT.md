# Task: Security, Compliance, and Governance

## Problem Statement
Create a CDK TypeScript program to deploy a zero-trust security architecture for a multi-department data platform. The configuration must: 1. Define IAM roles for three departments (Finance, Marketing, Analytics) with specific permissions to their respective S3 buckets and DynamoDB tables. 2. Implement cross-department data sharing roles that allow read-only access to specific S3 prefixes when explicitly granted. 3. Create Lambda execution roles with permissions scoped to specific DynamoDB tables and S3 buckets based on department ownership. 4. Set up CloudWatch log groups with KMS encryption for all Lambda functions and API Gateway endpoints. 5. Configure S3 bucket policies that deny all access except from specific IAM roles and require requests to use SSL. 6. Implement STS assume role policies with external ID validation and IP address conditions for production accounts. 7. Create CloudWatch alarms for detecting unusual IAM activity patterns including role assumption failures and permission denied events. 8. Deploy AWS Config rules to monitor IAM policy changes and non-compliant role configurations. 9. Set up SNS topics with subscription filters for security alerts based on CloudWatch metric filters. 10. Configure resource tags for all IAM resources following the pattern: Department, Environment, DataClassification. Expected output: A complete CDK application that deploys all security configurations across multiple stacks, with clear separation between department resources. The solution should include unit tests for IAM policy validation and integration tests for cross-department access scenarios.

## Background
A financial services company needs to implement fine-grained access controls for their multi-tenant data analytics platform. The platform hosts sensitive customer data across different departments, requiring strict isolation between teams while allowing controlled cross-department data sharing for specific approved use cases.

## Environment
Multi-account AWS Organization deployed in us-east-1 with separate accounts for dev, staging, and production environments. Each account contains department-specific S3 buckets, Lambda functions for data processing, and DynamoDB tables for metadata storage. Infrastructure managed using CDK 2.x with TypeScript, requiring Node.js 18+ and AWS CLI v2 configured. VPCs in each account have private subnets only with VPC endpoints for S3, DynamoDB, and CloudWatch. AWS Organizations with SCPs enabled, AWS SSO for user authentication, and CloudWatch cross-account observability configured.

## Constraints
["IAM roles must follow the principle of least privilege with no wildcard resource permissions", "All cross-account access must use external ID validation with a minimum 32-character random string", "Session duration for assumed roles cannot exceed 1 hour for production environments", "Each department must have separate S3 buckets with bucket policies denying access from other departments", "CloudWatch Logs retention must be set to 90 days with encryption using customer-managed KMS keys", "All API calls must be logged to CloudWatch with specific metric filters for privilege escalation attempts", "Service Control Policies must prevent creation of IAM users with programmatic access in production accounts"]
