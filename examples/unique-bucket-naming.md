# Unique S3 Bucket Naming Example

This example demonstrates how the S3 bucket module automatically generates unique bucket names for each deployment.

## How It Works

The module uses a combination of:

- Project name (from `var.project_name`)
- Environment suffix (from `var.environment`)
- Random 8-character string (generated by `random_string`)

## Example Bucket Names

When you deploy without specifying a custom bucket name, you'll get names like:

```
tap-tap-stack-dev-a1b2c3d4
tap-tap-stack-pr123-e5f6g7h8
tap-tap-stack-staging-i9j0k1l2
```

## Usage Examples

### 1. Auto-generated unique name (recommended for PRs)

```hcl
module "s3" {
  source       = "../lib/modules"
  environment  = "pr123"
  project_name = "my-project"
  tags = {
    Owner = "DevOps"
  }
}
```

### 2. Custom bucket name

```hcl
module "s3" {
  source       = "../lib/modules"
  bucket_name  = "my-custom-bucket-name"
  environment  = "prod"
  project_name = "my-project"
  tags = {
    Owner = "DevOps"
  }
}
```

### 3. Using variables

```hcl
variable "environment" {
  type    = string
  default = "dev"
}

variable "project_name" {
  type    = string
  default = "tap"
}

module "s3" {
  source       = "../lib/modules"
  environment  = var.environment
  project_name = var.project_name
  tags = {
    Environment = var.environment
    Project     = var.project_name
  }
}
```

## Benefits

1. **No naming conflicts**: Each deployment gets a unique bucket name
2. **PR isolation**: Different PRs get different bucket names
3. **Easy identification**: Bucket names include environment and project info
4. **Flexible**: Can still use custom names when needed
5. **Compliant**: Follows AWS S3 naming conventions

## Outputs

The module provides these outputs:

```hcl
output "bucket_id" {
  value = module.s3.bucket_id
  # Example: "tap-tap-stack-dev-a1b2c3d4"
}

output "bucket_arn" {
  value = module.s3.bucket_arn
  # Example: "arn:aws:s3:::tap-tap-stack-dev-a1b2c3d4"
}

output "bucket_region" {
  value = module.s3.bucket_region
  # Example: "us-east-1"
}
```

## CI/CD Integration

In your CI/CD pipeline, the bucket name will be automatically unique for each PR:

```bash
# For PR #123
ENVIRONMENT_SUFFIX=pr123
# Bucket name: tap-tap-stack-pr123-a1b2c3d4

# For PR #456  
ENVIRONMENT_SUFFIX=pr456
# Bucket name: tap-tap-stack-pr456-e5f6g7h8
```

This ensures complete isolation between different pull requests and environments.
