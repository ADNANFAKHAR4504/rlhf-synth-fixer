# Model Failures

This file documents the issues and limitations of the AI model's generated code. It serves as a record of the manual corrections and improvements that were required to make the code functional and production-ready.

## Migration Stack

The following issues were identified in the `migration-stack.ts` file generated by the model:

- **Hardcoded EC2 Key Pair:** The original code had a hardcoded dependency on a pre-existing EC2 key pair named `migration-bastion-key`. This was a deployment blocker and not a good practice.
- **Lack of Self-Containment:** The stack was not self-contained and relied on external resources that were not defined in the stack.

These issues were addressed by:

- Automating the creation of the EC2 key pair.
- Securely storing the private key in AWS Secrets Manager.
- Adding the `cdk-ec2-key-pair` dependency to the project.
- Correcting the properties for the `KeyPair` construct.
- Correcting the output for the secret name.

- **ALB Not Routing Traffic:** The ALB was returning a 502 Bad Gateway error because the health checks were failing. This was caused by the Nginx service not being installed and started correctly on the web server instances.
