# Model failures

## Failures and fixes

| Aspect                    | Failure                                                                          | Fix                                                                                     | Impact of Fix                                                                    |
| ------------------------- | -------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| DB credentials management | Static admin username/password without rotation                                  | Enable RDS ManageMasterUserPassword with Secrets Manager rotation                       | Automated rotation and no hardcoded secrets, improving security and ops hygiene  |
| Secret access IAM         | No IAM policy for ECS/Lambda to read DB secrets                                  | Attach least‑privilege secretsmanager:GetSecretValue/DescribeSecret to app roles        | Enables secure, auditable secret retrieval at runtime, enforcing least privilege |
| Workload secret usage     | Workloads not configured to fetch DB creds from Secrets Manager                  | Pass only secret ARN and fetch credentials at runtime in tasks/functions                | Keeps credentials out of configs and supports seamless credential rotation       |
| OpenSearch admin auth     | Admin credentials provided via parameters                                        | Generate/store admin credentials in Secrets Manager with dynamic resolution             | Strong managed secrets with versioning and auditing, reducing misuse risk        |
| S3 access controls        | Uses legacy ACLs (AccessControl: Private) on buckets                             | Remove ACLs; enforce access with PublicAccessBlock and bucket policies                  | Centralized, granular, auditable access control aligned with current guidance    |
| CloudFront logs bucket    | PAB settings incompatible with CloudFront ACL writes and no explicit logs policy | Disable PAB for logs bucket, add OwnershipControls and explicit CloudFront write policy | Reliable log delivery with correct ownership and zero unintended public exposure |
| Lambda runtime            | Outdated Node.js 18 runtime                                                      | Upgrade functions to Node.js 22                                                         | Better performance, security patches, and longer support runway                  |
| Aurora engine version     | Aurora MySQL pinned to 8.0.mysql_aurora.3.02.0                                   | Use latest stable 8.0.mysql_aurora.3.04.0                                               | Gains bug fixes, performance improvements, and security updates                  |
| Instance sizing           | Hardcoded r5.large for ElastiCache and r5.large.search for OpenSearch            | Parameterize instance types with sensible defaults                                      | Right‑sizing across environments and easier cost/performance tuning              |
| Secret lifecycle pattern  | Manual secret creation + SecretTargetAttachment to DB                            | Let RDS auto‑create/manage the master secret via ManageMasterUserPassword               | Avoids dependency pitfalls; keeps secrets synchronized through rotations         |
| AWS Config setup          | Template typo in Config S3 bucket resource type                                  | Correct resource type to proper S3 bucket specification                                 | Successful stack deployment and reliable Config snapshot delivery                |
