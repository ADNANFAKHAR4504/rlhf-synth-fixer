# AWS Region Migration - Backend Configuration
# Platform: Terraform with HCL
# This configuration uses S3 for state storage with DynamoDB for state locking

terraform {
  backend "s3" {
    # Replace these placeholder values with your actual S3 bucket and DynamoDB table
    bucket         = "terraform-state-bucket-REPLACE_ME"
    key            = "region-migration/terraform.tfstate"
    region         = "us-west-2"
    encrypt        = true
    dynamodb_table = "terraform-state-lock-REPLACE_ME"

    # Workspace configuration allows separate state files per region
    # Workspace names: us-west-1 (source) and us-west-2 (target)
    workspace_key_prefix = "workspaces"
  }
}

# Backend Configuration Notes:
#
# 1. Create S3 bucket for state storage:
#    aws s3api create-bucket \
#      --bucket terraform-state-bucket-YOUR-SUFFIX \
#      --region us-west-2 \
#      --create-bucket-configuration LocationConstraint=us-west-2
#
# 2. Enable versioning on the bucket:
#    aws s3api put-bucket-versioning \
#      --bucket terraform-state-bucket-YOUR-SUFFIX \
#      --versioning-configuration Status=Enabled
#
# 3. Enable encryption:
#    aws s3api put-bucket-encryption \
#      --bucket terraform-state-bucket-YOUR-SUFFIX \
#      --server-side-encryption-configuration \
#      '{"Rules":[{"ApplyServerSideEncryptionByDefault":{"SSEAlgorithm":"AES256"}}]}'
#
# 4. Create DynamoDB table for state locking:
#    aws dynamodb create-table \
#      --table-name terraform-state-lock-YOUR-SUFFIX \
#      --attribute-definitions AttributeName=LockID,AttributeType=S \
#      --key-schema AttributeName=LockID,KeyType=HASH \
#      --billing-mode PAY_PER_REQUEST \
#      --region us-west-2
#
# 5. Replace REPLACE_ME values in this file with your actual resource names
