We’re doing this in AWS CDK (TypeScript) and deploying via CloudFormation. Keep the project small and predictable: three files only — bin/tap.ts (app/region wiring), lib/tap-stack.ts (all resources and security controls), and cdk.json (project config). When the model replies, it should return only the code for those three files — no explanations, no comments, nothing extra.

The ask is a secure-by-default environment that lines up with our corporate standards and CIS AWS Foundations Benchmark. Define everything in TypeScript using CDK constructs. Build a VPC that separates public and private resources, with an Internet Gateway for public egress and NAT Gateways for private subnets. All EC2 instances live inside this VPC and are protected by security groups that allow only what’s necessary — least privilege, no broad openings. Do the same for any additional SGs you create.

Lock down data: S3 buckets are private with block-public-access enabled and SSE-S3 for encryption. RDS uses KMS for server-side encryption; keep RDS in private subnets and restrict access by SG only. Encrypt EBS volumes and make sure traffic in transit is protected (use TLS where applicable). IAM roles and policies must be least-privilege — scope them tightly for EC2, RDS, S3, logging, and anything else you add.

Monitoring and audit need to be first-class. Turn on VPC Flow Logs (to an encrypted destination). Enable CloudTrail and send its logs to an encrypted S3 bucket. Set up CloudWatch Logs/metrics and alarms for EC2 CPU and memory — for memory, assume we’ll run the CloudWatch Agent (you can model the SSM association or a userdata install so the metric exists). Add AWS Config and use managed rules to continuously check drift and compliance, including root account MFA enabled, S3 public access blocked, and other CIS-aligned checks. We also need to restrict root usage by defining groups and policies for human access (e.g., Admins/Developers) and not granting anything to root in this stack. Tag everything consistently based on our org policy (at minimum: Environment, Project, Owner) and make sure tags flow to all resources.

This should synth and deploy cleanly with cdk synth and cdk deploy without manual steps. Keep it in us-east-1 unless you wire multi-region explicitly; the priority is getting a complete, secure baseline that passes CIS-style checks and our constraints.

Return only the code for bin/tap.ts, lib/tap-stack.ts, and cdk.json.
