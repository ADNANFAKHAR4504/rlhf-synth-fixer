Create a CloudFormation YAML template that sets up a secure AWS infrastructure following best practices for identity management, networking, encryption, and monitoring. The environment should include IAM users with tightly scoped access policies and enforce resource tagging using the Environment tag to distinguish development, staging, and production. All S3 buckets must use default encryption, and security groups must restrict SSH access to the approved corporate IP range. Provision RDS instances with encrypted storage, enable CloudTrail and CloudWatch for auditing, and activate VPC flow logs for network visibility. EC2 instances should use only company-approved AMIs and rely on IAM roles instead of static credentials. Configure an SSL certificate for the application load balancer and ensure SNS notifications are triggered by security alarms. Lambda functions must operate with least privilege IAM policies. The final CloudFormation YAML file should fully implement these requirements and deploy successfully while enforcing consistent security standards across all environments.
