{
  "name": "iac-synth-59183624",
  "version": "1.0.0",
  "description": "Lead Scoring System with SageMaker - CloudFormation",
  "scripts": {
    "lint": "node -e \"const fs = require('fs'); try { JSON.parse(fs.readFileSync('./lib/TapStack.json', 'utf8')); console.log('JSON syntax valid'); process.exit(0); } catch(e) { console.error('JSON syntax error:', e.message); process.exit(1); }\"",
    "validate": "aws cloudformation validate-template --template-body file://lib/TapStack.json --region us-west-2",
    "build": "echo 'Building CloudFormation template...' && npm run lint && npm run validate",
    "synth": "echo 'CloudFormation JSON template already synthesized'",
    "deploy": "aws cloudformation deploy --template-file lib/TapStack.json --stack-name TapStack${ENVIRONMENT_SUFFIX:-synth59183624} --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --parameter-overrides NotificationEmail=test@example.com --region us-west-2",
    "destroy": "aws cloudformation delete-stack --stack-name TapStack${ENVIRONMENT_SUFFIX:-synth59183624} --region us-west-2 && aws cloudformation wait stack-delete-complete --stack-name TapStack${ENVIRONMENT_SUFFIX:-synth59183624} --region us-west-2",
    "get-outputs": "aws cloudformation describe-stacks --stack-name TapStack${ENVIRONMENT_SUFFIX:-synth59183624} --region us-west-2 --query 'Stacks[0].Outputs' --output json > cfn-outputs/raw-outputs.json && node -e \"const fs = require('fs'); const raw = JSON.parse(fs.readFileSync('cfn-outputs/raw-outputs.json', 'utf8')); const flat = {}; raw.forEach(o => flat[o.OutputKey] = o.OutputValue); fs.writeFileSync('cfn-outputs/flat-outputs.json', JSON.stringify(flat, null, 2)); console.log('Outputs saved to cfn-outputs/flat-outputs.json');\"",
    "test:unit": "jest --testMatch='**/test/*.unit.test.ts' --coverage",
    "test:integration": "jest --testMatch='**/test/*.int.test.ts'",
    "test": "npm run test:unit && npm run test:integration"
  },
  "devDependencies": {
    "@types/jest": "^29.5.11",
    "@types/node": "^20.10.6",
    "aws-sdk": "^2.1500.0",
    "jest": "^29.7.0",
    "ts-jest": "^29.1.1",
    "typescript": "^5.3.3"
  },
  "jest": {
    "preset": "ts-jest",
    "testEnvironment": "node",
    "coverageDirectory": "coverage",
    "collectCoverageFrom": [
      "lib/**/*.json"
    ]
  }
}