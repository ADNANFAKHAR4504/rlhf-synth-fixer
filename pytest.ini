[pytest]
# Only collect tests from the tests/ folder in the root
testpaths = tests

# Test file patterns to collect
python_files = test_*.py *_test.py

# Add the current directory to the Python path
pythonpath = .

# Ignore these directories during test discovery
norecursedirs = node_modules __pycache__ .venv .git archive templates

# Show output from test execution and collect coverage data
# --testdox for BDD-style output format with describe/it markers
# -l flag shows local variables in tracebacks
# --cov=lib/ only checks coverage for files in the lib directory
addopts = -vv --cov=lib/

# Set the default marker for tests that should be skipped in certain conditions
markers =
    unit: mark test as a unit test
    integration: mark test as an integration test
    slow: mark test as slow (typically skipped in CI)
    describe: mark a class as a test suite with a descriptive name
    it: mark a test method with a descriptive name

# Configure JUnit XML report
junit_family = xunit2

# Coverage configuration
[coverage:run]
source = lib
omit = tests/*, setup.py, tap.py, __init__.py, lib/__init__.py

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise NotImplementedError
    if __name__ == .__main__.:
