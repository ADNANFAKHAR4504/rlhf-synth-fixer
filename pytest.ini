[pytest]
# ----------------------------
# TEST DISCOVERY CONFIGURATION
# ----------------------------

# Where pytest should look for tests
testpaths = tests . 

# Patterns for test file names (collects test*.py in any subfolder of `tests`)
python_files = test_*.py *_test.py

# Add current directory to sys.path so imports like "from lib import ..." work
pythonpath = .

# ----------------------------
# WARNINGS CONFIGURATION
# ----------------------------

# Suppress specific warnings that are noisy or irrelevant in test output
filterwarnings =
    ignore::DeprecationWarning:google._upb._message

# ----------------------------
# DIRECTORIES TO IGNORE
# ----------------------------

# These folders will not be searched for tests
norecursedirs = node_modules __pycache__ .venv .git archive templates

# ----------------------------
# PYTEST OPTIONS
# ----------------------------

# Default extra options for pytest runs
# -vv : verbose output
# --strict-markers : fail if unknown test markers are used
# Note: Coverage options are configured in Pipfile scripts to avoid conflicts
addopts =
    -vv
    --strict-markers

# ----------------------------
# TEST MARKERS
# ----------------------------

# Custom markers to categorize tests
markers =
    unit: mark test as a unit test
    integration: mark test as an integration test
    slow: mark test as slow (typically skipped in CI)

# ----------------------------
# JUNIT REPORT FORMAT
# ----------------------------

# Use the xunit2 format for compatibility with most CI systems
junit_family = xunit2

# ----------------------------
# COVERAGE CONFIGURATION
# ----------------------------

