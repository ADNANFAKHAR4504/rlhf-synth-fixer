============================= test session starts ==============================
platform darwin -- Python 3.12.11, pytest-8.4.2, pluggy-1.6.0 -- /Users/mayanksethi/.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/bin/python
cachedir: .pytest_cache
rootdir: /Users/mayanksethi/Projects/turing/iac-test-automations/worktree/synth-6ekmx
configfile: pytest.ini
plugins: testdox-3.1.0, typeguard-2.13.3, env-1.2.0, cov-7.0.0
collecting ... collected 44 items

tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_base_stack_is_abstract PASSED [  2%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_environment_name FAILED [  4%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_staging_stack_implements_get_environment_name FAILED [  6%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_prod_stack_implements_get_environment_name FAILED [  9%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_vpc_cidr FAILED [ 11%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_db_instance_type FAILED [ 13%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_prod_stack_implements_get_db_instance_type FAILED [ 15%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_min_capacity FAILED [ 18%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_prod_stack_implements_get_max_capacity FAILED [ 20%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_alarm_thresholds FAILED [ 22%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_all_child_stacks_implement_all_abstract_methods FAILED [ 25%]
tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_vpc_cidr_uniqueness FAILED [ 27%]
tests/unit/test_payment_stacks.py::TestDevPaymentStack::test_dev_stack_creation PASSED [ 29%]
tests/unit/test_payment_stacks.py::TestDevPaymentStack::test_dev_vpc_cidr PASSED [ 31%]
tests/unit/test_payment_stacks.py::TestDevPaymentStack::test_dev_instance_type PASSED [ 34%]
tests/unit/test_payment_stacks.py::TestDevPaymentStack::test_dev_capacity PASSED [ 36%]
tests/unit/test_payment_stacks.py::TestDevPaymentStack::test_dev_alarm_thresholds PASSED [ 38%]
tests/unit/test_payment_stacks.py::TestStagingPaymentStack::test_staging_stack_creation PASSED [ 40%]
tests/unit/test_payment_stacks.py::TestStagingPaymentStack::test_staging_vpc_cidr PASSED [ 43%]
tests/unit/test_payment_stacks.py::TestStagingPaymentStack::test_staging_instance_type PASSED [ 45%]
tests/unit/test_payment_stacks.py::TestStagingPaymentStack::test_staging_capacity PASSED [ 47%]
tests/unit/test_payment_stacks.py::TestStagingPaymentStack::test_staging_alarm_thresholds PASSED [ 50%]
tests/unit/test_payment_stacks.py::TestProdPaymentStack::test_prod_stack_creation PASSED [ 52%]
tests/unit/test_payment_stacks.py::TestProdPaymentStack::test_prod_vpc_cidr PASSED [ 54%]
tests/unit/test_payment_stacks.py::TestProdPaymentStack::test_prod_instance_type PASSED [ 56%]
tests/unit/test_payment_stacks.py::TestProdPaymentStack::test_prod_capacity PASSED [ 59%]
tests/unit/test_payment_stacks.py::TestProdPaymentStack::test_prod_alarm_thresholds PASSED [ 61%]
tests/unit/test_payment_stacks.py::TestCIDRValidation::test_no_cidr_overlap PASSED [ 63%]
tests/unit/test_payment_stacks.py::TestEnvironmentSuffixUsage::test_resources_include_environment_suffix PASSED [ 65%]
tests/unit/test_payment_stacks.py::TestTapStackOrchestrator::test_tap_stack_creates_dev_by_default PASSED [ 68%]
tests/unit/test_payment_stacks.py::TestTapStackOrchestrator::test_tap_stack_creates_staging PASSED [ 70%]
tests/unit/test_payment_stacks.py::TestTapStackOrchestrator::test_tap_stack_creates_prod PASSED [ 72%]
tests/unit/test_security_aspect.py::TestSecurityPolicyAspect::test_security_aspect_instantiation PASSED [ 75%]
tests/unit/test_security_aspect.py::TestSecurityPolicyAspect::test_s3_bucket_encryption_check PASSED [ 77%]
tests/unit/test_security_aspect.py::TestSecurityPolicyAspect::test_s3_bucket_with_kms_encryption PASSED [ 79%]
tests/unit/test_security_aspect.py::TestSecurityPolicyAspect::test_rds_encryption_check PASSED [ 81%]
tests/unit/test_security_aspect.py::TestSecurityPolicyAspect::test_sqs_encryption_check PASSED [ 84%]
tests/unit/test_security_aspect.py::TestSecurityPolicyAspect::test_security_aspect_visit_method PASSED [ 86%]
tests/unit/test_security_aspect.py::TestSecurityPolicyAspect::test_security_aspect_on_multiple_resources PASSED [ 88%]
tests/unit/test_security_aspect.py::TestSecurityPolicyAspect::test_security_aspect_with_non_security_resources PASSED [ 90%]
tests/unit/test_vpc_peering.py::TestVpcPeeringConstruct::test_vpc_peering_construct_creation FAILED [ 93%]
tests/unit/test_vpc_peering.py::TestVpcPeeringConstruct::test_vpc_peering_connection_properties FAILED [ 95%]
tests/unit/test_vpc_peering.py::TestVpcPeeringConstruct::test_vpc_peering_routes_configured FAILED [ 97%]
tests/unit/test_vpc_peering.py::TestVpcPeeringConstruct::test_vpc_peering_with_environment_suffix FAILED [100%]

=================================== FAILURES ===================================
_ TestBasePaymentStackAbstractMethods.test_dev_stack_implements_get_environment_name _
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43500>
app = <aws_cdk.App object at 0x116ba0ce0>

    def test_dev_stack_implements_get_environment_name(self, app):
        """Test DevPaymentStack implements get_environment_name"""
>       stack = DevPaymentStack(
            app,
            "TestDevStack",
            environment_suffix="test"
        )

tests/unit/test_base_payment_stack.py:30: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/dev_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116ba0f80>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x116ba1040>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_ TestBasePaymentStackAbstractMethods.test_staging_stack_implements_get_environment_name _
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'TestStagingStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43650>
app = <aws_cdk.App object at 0x116c4acc0>

    def test_staging_stack_implements_get_environment_name(self, app):
        """Test StagingPaymentStack implements get_environment_name"""
>       stack = StagingPaymentStack(
            app,
            "TestStagingStack",
            environment_suffix="test"
        )

tests/unit/test_base_payment_stack.py:44: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/staging_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116c48d70>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x116c49730>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'TestStagingStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_ TestBasePaymentStackAbstractMethods.test_prod_stack_implements_get_environment_name _
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'TestProdStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43770>
app = <aws_cdk.App object at 0x116ba1940>

    def test_prod_stack_implements_get_environment_name(self, app):
        """Test ProdPaymentStack implements get_environment_name"""
>       stack = ProdPaymentStack(
            app,
            "TestProdStack",
            environment_suffix="test"
        )

tests/unit/test_base_payment_stack.py:57: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/prod_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116ba1b20>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x106c0d550>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'TestProdStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
__ TestBasePaymentStackAbstractMethods.test_dev_stack_implements_get_vpc_cidr __
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43920>
app = <aws_cdk.App object at 0x11777b650>

    def test_dev_stack_implements_get_vpc_cidr(self, app):
        """Test DevPaymentStack implements get_vpc_cidr"""
>       stack = DevPaymentStack(
            app,
            "TestDevStack",
            environment_suffix="test"
        )

tests/unit/test_base_payment_stack.py:70: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/dev_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x11777be60>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x11777bf80>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_ TestBasePaymentStackAbstractMethods.test_dev_stack_implements_get_db_instance_type _
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43a40>
app = <aws_cdk.App object at 0x11777b110>

    def test_dev_stack_implements_get_db_instance_type(self, app):
        """Test DevPaymentStack implements get_db_instance_type"""
>       stack = DevPaymentStack(
            app,
            "TestDevStack",
            environment_suffix="test"
        )

tests/unit/test_base_payment_stack.py:83: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/dev_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116cd6570>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x1168ebec0>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_ TestBasePaymentStackAbstractMethods.test_prod_stack_implements_get_db_instance_type _
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'TestProdStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43830>
app = <aws_cdk.App object at 0x116cd6090>

    def test_prod_stack_implements_get_db_instance_type(self, app):
        """Test ProdPaymentStack implements get_db_instance_type"""
>       stack = ProdPaymentStack(
            app,
            "TestProdStack",
            environment_suffix="test"
        )

tests/unit/test_base_payment_stack.py:96: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/prod_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116cd5520>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x116881b80>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'TestProdStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_ TestBasePaymentStackAbstractMethods.test_dev_stack_implements_get_min_capacity _
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43440>
app = <aws_cdk.App object at 0x116cd7e60>

    def test_dev_stack_implements_get_min_capacity(self, app):
        """Test DevPaymentStack implements get_min_capacity"""
>       stack = DevPaymentStack(
            app,
            "TestDevStack",
            environment_suffix="test"
        )

tests/unit/test_base_payment_stack.py:109: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/dev_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116cd6030>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x116cd5c10>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_ TestBasePaymentStackAbstractMethods.test_prod_stack_implements_get_max_capacity _
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'TestProdStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43bc0>
app = <aws_cdk.App object at 0x116cd7560>

    def test_prod_stack_implements_get_max_capacity(self, app):
        """Test ProdPaymentStack implements get_max_capacity"""
>       stack = ProdPaymentStack(
            app,
            "TestProdStack",
            environment_suffix="test"
        )

tests/unit/test_base_payment_stack.py:123: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/prod_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116cda120>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x106c0c350>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'TestProdStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_ TestBasePaymentStackAbstractMethods.test_dev_stack_implements_get_alarm_thresholds _
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43ce0>
app = <aws_cdk.App object at 0x116cd6ba0>

    def test_dev_stack_implements_get_alarm_thresholds(self, app):
        """Test DevPaymentStack implements get_alarm_thresholds"""
>       stack = DevPaymentStack(
            app,
            "TestDevStack",
            environment_suffix="test"
        )

tests/unit/test_base_payment_stack.py:137: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/dev_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116cd81a0>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x116cd9eb0>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_ TestBasePaymentStackAbstractMethods.test_all_child_stacks_implement_all_abstract_methods _
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'DevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43e00>
app = <aws_cdk.App object at 0x116cd93d0>

    def test_all_child_stacks_implement_all_abstract_methods(self, app):
        """Test all child stacks implement all required abstract methods"""
        # Create instances of all child stacks
>       dev_stack = DevPaymentStack(app, "DevStack", environment_suffix="test")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/unit/test_base_payment_stack.py:152: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/dev_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116cd9850>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x116cda7e0>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'DevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_________ TestBasePaymentStackAbstractMethods.test_vpc_cidr_uniqueness _________
jsii.errors.JavaScriptError: 
  ValidationError: Vpc2 at 'DevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
      at path [] in aws-cdk-lib.App


The above exception was the direct cause of the following exception:

self = <tests.unit.test_base_payment_stack.TestBasePaymentStackAbstractMethods object at 0x116b43f50>
app = <aws_cdk.App object at 0x116cdb860>

    def test_vpc_cidr_uniqueness(self, app):
        """Test each environment has unique VPC CIDR"""
>       dev_stack = DevPaymentStack(app, "DevStack", environment_suffix="test")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/unit/test_base_payment_stack.py:172: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/payment_stacks/dev_stack.py:22: in __init__
    super().__init__(
lib/payment_stacks/base_payment_stack.py:58: in __init__
    self.vpc_construct = VpcConstruct(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
lib/constructs/vpc_construct.py:24: in __init__
    self.vpc = ec2.Vpc(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: in __call__
    inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/aws_cdk/aws_ec2/__init__.py:55086: in __init__
    jsii.create(self.__class__, self, [scope, id, props])
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/__init__.py:334: in create
    response = self.provider.create(
../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:365: in create
    return self._process.send(request, CreateResponse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jsii._kernel.providers.process._NodeProcess object at 0x107675b50>
request = CreateRequest(fqn='aws-cdk-lib.aws_ec2.Vpc', args=[<lib.constructs.vpc_construct.VpcConstruct object at 0x116cda3f0>, 'PaymentVpc-test', {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.VpcProps', 'data': {'availabilityZones': None, 'cidr': None, 'createInternetGateway': None, 'defaultInstanceTenancy': None, 'enableDnsHostnames': True, 'enableDnsSupport': True, 'flowLogs': None, 'gatewayEndpoints': None, 'ipAddresses': <jsii._reference_map.InterfaceDynamicProxy object at 0x116cdbe60>, 'ipProtocol': None, 'ipv6Addresses': None, 'maxAzs': 3, 'natGatewayProvider': None, 'natGateways': 3, 'natGatewaySubnets': None, 'reservedAzs': None, 'restrictDefaultSecurityGroup': None, 'subnetConfiguration': [{'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'public-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PUBLIC'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}, {'$jsii.struct': {'fqn': 'aws-cdk-lib.aws_ec2.SubnetConfiguration', 'data': {'name': 'private-test', 'subnetType': {'$jsii.enum': 'aws-cdk-lib.aws_ec2.SubnetType/PRIVATE_WITH_EGRESS'}, 'cidrMask': 24, 'ipv6AssignAddressOnCreation': None, 'mapPublicIpOnLaunch': None, 'reserved': None}}}], 'vpcName': 'payment-vpc-test', 'vpnConnections': None, 'vpnGateway': None, 'vpnGatewayAsn': None, 'vpnRoutePropagation': None}}}], overrides=[], interfaces=['constructs.IConstruct', 'aws-cdk-lib.IResource', 'aws-cdk-lib.aws_ec2.IVpc'])
response_type = <class 'jsii._kernel.types.CreateResponse'>

    def send(
        self, request: KernelRequest, response_type: Type[KernelResponse]
    ) -> KernelResponse:
        req_dict = self._serializer.unstructure(request)
        data = json.dumps(req_dict, default=jdefault).encode("utf8")
    
        # Send our data, ensure that it is framed with a trailing \n
        assert self._process.stdin is not None
        self._process.stdin.write(b"%b\n" % (data,))
        self._process.stdin.flush()
    
        resp: _ProcessResponse = self._serializer.structure(
            self._next_message(), _ProcessResponse
        )
    
        if isinstance(resp, _OkayResponse):
            return self._serializer.structure(resp.ok, response_type)
        elif isinstance(resp, _CallbackResponse):
            return resp.callback
        else:
            if resp.name == ErrorType.JSII_FAULT.value:
                raise JSIIError(resp.error) from JavaScriptError(resp.stack)
>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)
E           RuntimeError: Vpc2 at 'DevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_kernel/providers/process.py:342: RuntimeError
_________ TestVpcPeeringConstruct.test_vpc_peering_construct_creation __________

self = <tests.unit.test_vpc_peering.TestVpcPeeringConstruct object at 0x116ba22a0>
stack = <aws_cdk.Stack object at 0x1183d2000>
source_vpc = <aws_cdk.aws_ec2.Vpc object at 0x1183b9ee0>
destination_vpc = <aws_cdk.aws_ec2.Vpc object at 0x1183b8e30>

    def test_vpc_peering_construct_creation(self, stack, source_vpc, destination_vpc):
        """Test VPC peering construct can be created"""
>       peering = VpcPeeringConstruct(
            stack,
            "TestPeering",
            source_vpc=source_vpc,
            destination_vpc=destination_vpc,
            environment_suffix="test"
        )

tests/unit/test_vpc_peering.py:45: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'lib.constructs.vpc_peering_construct.VpcPeeringConstruct'>
args = (<aws_cdk.Stack object at 0x1183d2000>, 'TestPeering')
kwargs = {'destination_vpc': <aws_cdk.aws_ec2.Vpc object at 0x1183b8e30>, 'environment_suffix': 'test', 'source_vpc': <aws_cdk.aws_ec2.Vpc object at 0x1183b9ee0>}

    def __call__(cls: Type[M], *args: Any, **kwargs) -> M:
        # There is no way to constrain the metaclass of a `Type[M]` hint today, so we have to
        # perform a `cast` trick here in order for MyPy to accept this code as valid... The implicit
        # arguments to `super()` otherwise are `super(__class__, cls)`, which results in an error.
>       inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: VpcPeeringConstruct.__init__() missing 3 required positional arguments: 'vpc', 'peer_vpc_id', and 'peer_vpc_cidr'

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: TypeError
________ TestVpcPeeringConstruct.test_vpc_peering_connection_properties ________

self = <tests.unit.test_vpc_peering.TestVpcPeeringConstruct object at 0x116ba0140>
stack = <aws_cdk.Stack object at 0x1183d3da0>
source_vpc = <aws_cdk.aws_ec2.Vpc object at 0x1183bb680>
destination_vpc = <aws_cdk.aws_ec2.Vpc object at 0x1183b9640>

    def test_vpc_peering_connection_properties(self, stack, source_vpc, destination_vpc):
        """Test VPC peering connection has correct properties"""
>       peering = VpcPeeringConstruct(
            stack,
            "TestPeering",
            source_vpc=source_vpc,
            destination_vpc=destination_vpc,
            environment_suffix="test"
        )

tests/unit/test_vpc_peering.py:58: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'lib.constructs.vpc_peering_construct.VpcPeeringConstruct'>
args = (<aws_cdk.Stack object at 0x1183d3da0>, 'TestPeering')
kwargs = {'destination_vpc': <aws_cdk.aws_ec2.Vpc object at 0x1183b9640>, 'environment_suffix': 'test', 'source_vpc': <aws_cdk.aws_ec2.Vpc object at 0x1183bb680>}

    def __call__(cls: Type[M], *args: Any, **kwargs) -> M:
        # There is no way to constrain the metaclass of a `Type[M]` hint today, so we have to
        # perform a `cast` trick here in order for MyPy to accept this code as valid... The implicit
        # arguments to `super()` otherwise are `super(__class__, cls)`, which results in an error.
>       inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: VpcPeeringConstruct.__init__() missing 3 required positional arguments: 'vpc', 'peer_vpc_id', and 'peer_vpc_cidr'

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: TypeError
__________ TestVpcPeeringConstruct.test_vpc_peering_routes_configured __________

self = <tests.unit.test_vpc_peering.TestVpcPeeringConstruct object at 0x116ba0380>
stack = <aws_cdk.Stack object at 0x1183baae0>
source_vpc = <aws_cdk.aws_ec2.Vpc object at 0x1183bac00>
destination_vpc = <aws_cdk.aws_ec2.Vpc object at 0x1183bacc0>

    def test_vpc_peering_routes_configured(self, stack, source_vpc, destination_vpc):
        """Test routes are added to both VPCs for peering"""
>       peering = VpcPeeringConstruct(
            stack,
            "TestPeering",
            source_vpc=source_vpc,
            destination_vpc=destination_vpc,
            environment_suffix="test"
        )

tests/unit/test_vpc_peering.py:75: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'lib.constructs.vpc_peering_construct.VpcPeeringConstruct'>
args = (<aws_cdk.Stack object at 0x1183baae0>, 'TestPeering')
kwargs = {'destination_vpc': <aws_cdk.aws_ec2.Vpc object at 0x1183bacc0>, 'environment_suffix': 'test', 'source_vpc': <aws_cdk.aws_ec2.Vpc object at 0x1183bac00>}

    def __call__(cls: Type[M], *args: Any, **kwargs) -> M:
        # There is no way to constrain the metaclass of a `Type[M]` hint today, so we have to
        # perform a `cast` trick here in order for MyPy to accept this code as valid... The implicit
        # arguments to `super()` otherwise are `super(__class__, cls)`, which results in an error.
>       inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: VpcPeeringConstruct.__init__() missing 3 required positional arguments: 'vpc', 'peer_vpc_id', and 'peer_vpc_cidr'

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: TypeError
_______ TestVpcPeeringConstruct.test_vpc_peering_with_environment_suffix _______

self = <tests.unit.test_vpc_peering.TestVpcPeeringConstruct object at 0x116ba0620>
stack = <aws_cdk.Stack object at 0x1183bb530>
source_vpc = <aws_cdk.aws_ec2.Vpc object at 0x1183bb5c0>
destination_vpc = <aws_cdk.aws_ec2.Vpc object at 0x1183bb7a0>

    def test_vpc_peering_with_environment_suffix(self, stack, source_vpc, destination_vpc):
        """Test VPC peering construct uses environment suffix in naming"""
        env_suffix = "prod"
>       peering = VpcPeeringConstruct(
            stack,
            "TestPeering",
            source_vpc=source_vpc,
            destination_vpc=destination_vpc,
            environment_suffix=env_suffix
        )

tests/unit/test_vpc_peering.py:92: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'lib.constructs.vpc_peering_construct.VpcPeeringConstruct'>
args = (<aws_cdk.Stack object at 0x1183bb530>, 'TestPeering')
kwargs = {'destination_vpc': <aws_cdk.aws_ec2.Vpc object at 0x1183bb7a0>, 'environment_suffix': 'prod', 'source_vpc': <aws_cdk.aws_ec2.Vpc object at 0x1183bb5c0>}

    def __call__(cls: Type[M], *args: Any, **kwargs) -> M:
        # There is no way to constrain the metaclass of a `Type[M]` hint today, so we have to
        # perform a `cast` trick here in order for MyPy to accept this code as valid... The implicit
        # arguments to `super()` otherwise are `super(__class__, cls)`, which results in an error.
>       inst = super(JSIIMeta, cast(JSIIMeta, cls)).__call__(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: VpcPeeringConstruct.__init__() missing 3 required positional arguments: 'vpc', 'peer_vpc_id', and 'peer_vpc_cidr'

../../../../../.local/share/virtualenvs/synth-6ekmx-DQqqVK5K/lib/python3.12/site-packages/jsii/_runtime.py:118: TypeError
================================ tests coverage ================================
______________ coverage: platform darwin, python 3.12.11-final-0 _______________

Name                                       Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------------
lib/__init__.py                                0      0      0      0   100%
lib/aspects/__init__.py                        0      0      0      0   100%
lib/aspects/security_aspect.py                12      3      8      2    65%   24, 27-28
lib/constructs/__init__.py                     0      0      0      0   100%
lib/constructs/database_construct.py           7      0      0      0   100%
lib/constructs/ecs_construct.py               24      0      0      0   100%
lib/constructs/monitoring_construct.py        11      0      0      0   100%
lib/constructs/vpc_construct.py                7      0      0      0   100%
lib/constructs/vpc_peering_construct.py        8      4      2      0    40%   23-39
lib/payment_stacks/__init__.py                 0      0      0      0   100%
lib/payment_stacks/base_payment_stack.py     109      6      2      0    95%   421, 426, 431, 436, 441, 446
lib/payment_stacks/dev_stack.py               19      0      0      0   100%
lib/payment_stacks/prod_stack.py              19      0      0      0   100%
lib/payment_stacks/staging_stack.py           19      0      0      0   100%
lib/tap_stack.py                              23      0      4      0   100%
--------------------------------------------------------------------------------------
TOTAL                                        258     13     16      2    93%
Coverage JSON written to file coverage.json
Required test coverage of 90% reached. Total coverage: 93.07%
=========================== short test summary info ============================
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_environment_name - RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_staging_stack_implements_get_environment_name - RuntimeError: Vpc2 at 'TestStagingStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_prod_stack_implements_get_environment_name - RuntimeError: Vpc2 at 'TestProdStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_vpc_cidr - RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_db_instance_type - RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_prod_stack_implements_get_db_instance_type - RuntimeError: Vpc2 at 'TestProdStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_min_capacity - RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_prod_stack_implements_get_max_capacity - RuntimeError: Vpc2 at 'TestProdStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_dev_stack_implements_get_alarm_thresholds - RuntimeError: Vpc2 at 'TestDevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_all_child_stacks_implement_all_abstract_methods - RuntimeError: Vpc2 at 'DevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_base_payment_stack.py::TestBasePaymentStackAbstractMethods::test_vpc_cidr_uniqueness - RuntimeError: Vpc2 at 'DevStack/VpcConstruct/PaymentVpc-test' should be created in the scope of a Stack, but no Stack found
FAILED tests/unit/test_vpc_peering.py::TestVpcPeeringConstruct::test_vpc_peering_construct_creation - TypeError: VpcPeeringConstruct.__init__() missing 3 required positional arguments: 'vpc', 'peer_vpc_id', and 'peer_vpc_cidr'
FAILED tests/unit/test_vpc_peering.py::TestVpcPeeringConstruct::test_vpc_peering_connection_properties - TypeError: VpcPeeringConstruct.__init__() missing 3 required positional arguments: 'vpc', 'peer_vpc_id', and 'peer_vpc_cidr'
FAILED tests/unit/test_vpc_peering.py::TestVpcPeeringConstruct::test_vpc_peering_routes_configured - TypeError: VpcPeeringConstruct.__init__() missing 3 required positional arguments: 'vpc', 'peer_vpc_id', and 'peer_vpc_cidr'
FAILED tests/unit/test_vpc_peering.py::TestVpcPeeringConstruct::test_vpc_peering_with_environment_suffix - TypeError: VpcPeeringConstruct.__init__() missing 3 required positional arguments: 'vpc', 'peer_vpc_id', and 'peer_vpc_cidr'
======================== 15 failed, 29 passed in 59.74s ========================
