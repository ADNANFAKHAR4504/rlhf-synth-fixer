Hey there! I need your help designing a serverless architecture using AWS CDK with Python(main.py- single stack). The goal is to create a scalable and secure system that leverages AWS services like Lambda, API Gateway, DynamoDB, and S3. Let me walk you through the requirements.

First, we’ll use AWS Lambda with a Python runtime to handle serverless compute. These Lambda functions will be triggered by an API Gateway, which will serve as the entry point for the application. The API Gateway should also support a custom domain and have CORS policies enabled to allow cross-origin requests.

For data persistence, we’ll use DynamoDB in on-demand capacity mode. It should also retain deleted items for 24 hours to support recovery scenarios. Static content, like frontend assets, will be stored in S3 buckets, and we need to ensure that the data at rest is encrypted using AWS KMS. Additionally, versioning should be enabled on the S3 bucket to keep track of changes.

Security is a top priority, so we’ll use IAM roles to secure API interactions and ensure that only authorized entities can access the resources. Logging should be enabled for all key services—Lambda, API Gateway, and DynamoDB—and we’ll use CloudWatch to monitor service activities and errors. For Lambda, we’ll also set up CloudWatch Alarms to notify us of execution errors.

The entire stack should be deployed in the `us-west-2` region, and it must be easy to replicate in other AWS accounts without requiring configuration changes. Finally, we’ll expose key resource identifiers like the API Gateway URL, Lambda function ARN, and DynamoDB table name as CloudFormation Outputs.


Once the stack is ready, we’ll validate the CloudFormation template generated by CDK using `cfn-lint` to ensure it adheres to AWS best practices. Let’s make this happen!