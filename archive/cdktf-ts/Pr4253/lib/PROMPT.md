Insert here the prompt that made the model fail.Create production-ready TypeScript CDK for Terraform (CDKTF) code that configures a CloudFormation-style infrastructure while ensuring consistent versioning, automated rollback, environment isolation, and lifecycle automation. The output must include exactly two files: lib/tap-stack.ts (main stack composing and instantiating all modules, handling environment selection, versioning, rollback, tagging, and lifecycle automation) and lib/modules.ts (reusable modules for VPC, EC2, RDS, ALB, S3, Route 53, CloudWatch, IAM, and environment lifecycle helpers). The solution must enforce consistent versioning across environments, implement automated rollback using deployment snapshots or state recovery, and allow seamless environment switching with isolated yet shared IAM roles and policies. Each environment should follow consistent tagging, monitoring, logging, and security compliance policies, including CloudWatch dashboards and alarms with environment-specific retention. The code should automate environment creation and teardown, validate compliance (encryption, tagging, access control), and include clear documentation on versioning, rollback, and environment switching. Output only the two TypeScript files, lib/tap-stack.ts and lib/modules.ts, written with strict TypeScript typing, production-quality comments, and modular, maintainable design.