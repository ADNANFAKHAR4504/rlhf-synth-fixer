{
  "platform": "cfn",
  "language": "yaml",
  "complexity": "hard",
  "turn_type": "single",
  "po_id": "349073",
  "team": "3",
  "startedAt": "2025-11-04T12:57:28.767Z",
  "subtask": "Provisioning of Infrastructure Environments",
  "subject_labels": [
    "Cloud Environment Setup"
  ],
  "training_quality": 9,
  "background": "Deploy a brand-new, self-contained serverless logging and data-processing environment in us-west-2 using a single TapStack.yml CloudFormation template. Build a VPC with two public and two private subnets across distinct AZs, attach an Internet Gateway, and provision dual NAT Gateways for private egress. Add Gateway and Interface VPC Endpoints (S3, DynamoDB, DynamoDB Streams, SQS, CloudWatch Logs, and CloudTrail) to keep traffic private. Create a KMS CMK (with rotation) and alias for encrypting an S3 logs bucket (versioned, public access blocked) that also receives CloudTrail logs. Provision an SQS queue with a DLQ, a DynamoDB table (PAY_PER_REQUEST) with NEW_IMAGE streams, and a Lambda function in private subnets that processes SQS messages and DynamoDB stream events, writing structured artifacts to the logs bucket using SSE-KMS. Configure IAM roles and least-privilege policies for Lambda, CloudWatch Logs retention (30 days), an SNS topic with an email subscription for alerting, and a CloudWatch Alarm that notifies on Lambda Errors within five minutes. Use consistent resource naming following '<team>-<service>-<use-case>-<component>-${EnvironmentSuffix}' tags and parameters for Team, Service, UseCase, EnvironmentSuffix, NotificationEmail, and LambdaRuntime. The stack must be fully self-contained (no external dependencies) and suitable for clean creation and teardown in a new account/region.",
  "aws_services": [
    "VPC",
    "Internet Gateway",
    "VPC Gateway Attachment",
    "Public Subnets",
    "Private Subnets",
    "Elastic IP",
    "NAT Gateway",
    "Route Table",
    "Route",
    "Subnet Route Table Association",
    "Security Group",
    "VPC Endpoint (Gateway S3)",
    "VPC Endpoint (Interface DynamoDB)",
    "VPC Endpoint (Interface DynamoDB Streams)",
    "VPC Endpoint (Interface SQS)",
    "VPC Endpoint (Interface CloudWatch Logs)",
    "VPC Endpoint (Interface CloudTrail)",
    "S3 Bucket",
    "S3 Bucket Policy",
    "KMS Key",
    "KMS Alias",
    "IAM Role",
    "IAM Policy",
    "CloudWatch Log Group",
    "Lambda Function",
    "Lambda Event Source Mapping (SQS)",
    "Lambda Event Source Mapping (DynamoDB Streams)",
    "SQS Queue",
    "SQS Dead Letter Queue",
    "DynamoDB Table",
    "SNS Topic",
    "SNS Subscription",
    "CloudWatch Alarm",
    "CloudTrail Trail"
  ],
  "coverage": {
    "lines": 100,
    "branches": 100
  },
  "author": "iqbala-turing",
  "dockerS3Location": ""
}
