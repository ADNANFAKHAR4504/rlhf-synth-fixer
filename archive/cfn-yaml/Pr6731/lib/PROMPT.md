Create a single CloudFormation YAML template named that implements a distributed event processing system for a financial services platform that needs to handle millions of transaction events daily with exactly once processing guarantees. The system requires sophisticated event routing and orchestration capabilities to process high volume financial transactions across multiple AWS regions while maintaining sub second latency for critical payment paths.

Your template should deploy a comprehensive event driven architecture using AWS EventBridge as the core event router, with custom rules that intelligently distribute events to specialized processing workflows. Implement three parallel Step Functions state machines that handle order processing, payment validation, and fraud detection respectively, ensuring they can operate independently while maintaining transactional consistency through saga patterns for distributed transaction rollback when failures occur.

The architecture must prevent duplicate transaction processing through distributed locking mechanisms using DynamoDB conditional writes, while SQS FIFO queues ensure ordered event delivery between system components. Configure Lambda functions with reserved concurrency for predictable performance during event transformations and state transitions, utilizing ARM based Graviton2 processors for cost optimization. Implement robust error handling with circuit breaker patterns using Step Functions' built in retry mechanisms with exponential backoff to prevent cascade failures when downstream services experience issues.

For compliance and operational requirements, configure EventBridge archive and replay functionality allowing the replay of any 24 hour period from the last 30 days. Establish cross region event replication between us-east-1 (primary) and eu-west-1 (secondary) using EventBridge global endpoints, with DynamoDB global tables providing eventually consistent state synchronization across regions. Integrate AWS X-Ray tracing throughout all components to enable distributed debugging and performance monitoring across the entire transaction flow.

The final infrastructure should process over 100,000 events per minute with automatic failover capabilities, dynamic resource scaling using on demand DynamoDB billing, and content based routing using JSON path expressions in EventBridge rules. Ensure SQS visibility timeouts adjust dynamically based on actual processing times, and all resources operate within private VPC subnets with appropriate VPC endpoints for secure inter-service communication.