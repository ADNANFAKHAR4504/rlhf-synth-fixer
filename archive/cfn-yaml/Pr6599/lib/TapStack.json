{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Web application infrastructure with S3, EC2, RDS, VPC Flow Logs, and CloudFront",
    "Parameters": {
        "EnvironmentSuffix": {
            "Type": "String",
            "Description": "Suffix for resource names to support parallel deployments (e.g., PR number)",
            "Default": "pr4056",
            "AllowedPattern": "^[a-zA-Z0-9\\-]*$",
            "ConstraintDescription": "Must contain only alphanumeric characters and hyphens"
        },
        "SourceAmiIdSsmParameter": {
            "Type": "String",
            "Default": "/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2",
            "Description": "SSM parameter name holding the AMI ID (keeps template free of hard-coded AMI IDs)"
        },
        "DBInstanceClass": {
            "Type": "String",
            "Description": "Database instance class",
            "Default": "db.t3.micro",
            "AllowedValues": [
                "db.t3.micro",
                "db.t3.small",
                "db.t3.medium",
                "db.t3.large"
            ],
            "ConstraintDescription": "Must be a valid RDS instance type"
        },
        "KeyPairName": {
            "Type": "String",
            "Description": "Name for the EC2 key pair",
            "Default": "WebAppKeyPair",
            "AllowedPattern": "^[a-zA-Z0-9][a-zA-Z0-9\\-]*$",
            "ConstraintDescription": "Must start with alphanumeric and contain only alphanumeric characters and hyphens"
        },
        "DBMasterUsername": {
            "Type": "String",
            "Description": "Database master username",
            "Default": "dbadmin",
            "MinLength": 1,
            "MaxLength": 16,
            "AllowedPattern": "[a-zA-Z][a-zA-Z0-9]*",
            "ConstraintDescription": "Must begin with a letter and contain only alphanumeric characters"
        },
        "EnvironmentTag": {
            "Type": "String",
            "Description": "Environment tag value",
            "Default": "Development"
        },
        "OwnerTag": {
            "Type": "String",
            "Description": "Owner tag value",
            "Default": "DevOps Team"
        },
        "ProjectTag": {
            "Type": "String",
            "Description": "Project tag value",
            "Default": "WebApp"
        },
        "VPCCidr": {
            "Type": "String",
            "Description": "CIDR block for VPC",
            "Default": "10.0.0.0/16",
            "AllowedPattern": "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\/([0-9]|[1-2][0-9]|3[0-2]))$"
        },
        "PublicSubnet1Cidr": {
            "Type": "String",
            "Description": "CIDR block for public subnet 1",
            "Default": "10.0.1.0/24"
        },
        "PublicSubnet2Cidr": {
            "Type": "String",
            "Description": "CIDR block for public subnet 2",
            "Default": "10.0.2.0/24"
        },
        "PrivateSubnet1Cidr": {
            "Type": "String",
            "Description": "CIDR block for private subnet 1",
            "Default": "10.0.11.0/24"
        },
        "PrivateSubnet2Cidr": {
            "Type": "String",
            "Description": "CIDR block for private subnet 2",
            "Default": "10.0.12.0/24"
        }
    },
    "Resources": {
        "VPC": {
            "Type": "AWS::EC2::VPC",
            "Properties": {
                "CidrBlock": {
                    "Ref": "VPCCidr"
                },
                "EnableDnsHostnames": true,
                "EnableDnsSupport": true,
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-vpc"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "InternetGateway": {
            "Type": "AWS::EC2::InternetGateway",
            "Properties": {
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-igw"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "InternetGatewayAttachment": {
            "Type": "AWS::EC2::VPCGatewayAttachment",
            "Properties": {
                "InternetGatewayId": {
                    "Ref": "InternetGateway"
                },
                "VpcId": {
                    "Ref": "VPC"
                }
            }
        },
        "PublicSubnet1": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": {
                    "Ref": "VPC"
                },
                "AvailabilityZone": {
                    "Fn::Select": [
                        0,
                        {
                            "Fn::GetAZs": ""
                        }
                    ]
                },
                "CidrBlock": {
                    "Ref": "PublicSubnet1Cidr"
                },
                "MapPublicIpOnLaunch": true,
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-subnet-1"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "PublicSubnet2": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": {
                    "Ref": "VPC"
                },
                "AvailabilityZone": {
                    "Fn::Select": [
                        1,
                        {
                            "Fn::GetAZs": ""
                        }
                    ]
                },
                "CidrBlock": {
                    "Ref": "PublicSubnet2Cidr"
                },
                "MapPublicIpOnLaunch": true,
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-subnet-2"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "PrivateSubnet1": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": {
                    "Ref": "VPC"
                },
                "AvailabilityZone": {
                    "Fn::Select": [
                        0,
                        {
                            "Fn::GetAZs": ""
                        }
                    ]
                },
                "CidrBlock": {
                    "Ref": "PrivateSubnet1Cidr"
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-private-subnet-1"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "PrivateSubnet2": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": {
                    "Ref": "VPC"
                },
                "AvailabilityZone": {
                    "Fn::Select": [
                        1,
                        {
                            "Fn::GetAZs": ""
                        }
                    ]
                },
                "CidrBlock": {
                    "Ref": "PrivateSubnet2Cidr"
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-private-subnet-2"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "PublicRouteTable": {
            "Type": "AWS::EC2::RouteTable",
            "Properties": {
                "VpcId": {
                    "Ref": "VPC"
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-rt"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "PublicRoute": {
            "Type": "AWS::EC2::Route",
            "DependsOn": "InternetGatewayAttachment",
            "Properties": {
                "RouteTableId": {
                    "Ref": "PublicRouteTable"
                },
                "DestinationCidrBlock": "0.0.0.0/0",
                "GatewayId": {
                    "Ref": "InternetGateway"
                }
            }
        },
        "PublicSubnet1RouteTableAssociation": {
            "Type": "AWS::EC2::SubnetRouteTableAssociation",
            "Properties": {
                "RouteTableId": {
                    "Ref": "PublicRouteTable"
                },
                "SubnetId": {
                    "Ref": "PublicSubnet1"
                }
            }
        },
        "PublicSubnet2RouteTableAssociation": {
            "Type": "AWS::EC2::SubnetRouteTableAssociation",
            "Properties": {
                "RouteTableId": {
                    "Ref": "PublicRouteTable"
                },
                "SubnetId": {
                    "Ref": "PublicSubnet2"
                }
            }
        },
        "S3Bucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
                "BucketName": {
                    "Fn::Sub": "${AWS::AccountId}-${AWS::Region}-${EnvironmentSuffix}-bucket"
                },
                "WebsiteConfiguration": {
                    "IndexDocument": "index.html",
                    "ErrorDocument": "error.html"
                },
                "PublicAccessBlockConfiguration": {
                    "BlockPublicAcls": false,
                    "BlockPublicPolicy": false,
                    "IgnorePublicAcls": false,
                    "RestrictPublicBuckets": false
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-s3-bucket"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "S3BucketPolicy": {
            "Type": "AWS::S3::BucketPolicy",
            "Properties": {
                "Bucket": {
                    "Ref": "S3Bucket"
                },
                "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Sid": "PublicReadGetObject",
                            "Effect": "Allow",
                            "Principal": "*",
                            "Action": "s3:GetObject",
                            "Resource": {
                                "Fn::Sub": "${S3Bucket.Arn}/*"
                            }
                        }
                    ]
                }
            }
        },
        "EC2Role": {
            "Type": "AWS::IAM::Role",
            "Properties": {
                "RoleName": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-ec2-role"
                },
                "AssumeRolePolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Principal": {
                                "Service": [
                                    "ec2.amazonaws.com"
                                ]
                            },
                            "Action": [
                                "sts:AssumeRole"
                            ]
                        }
                    ]
                },
                "ManagedPolicyArns": [
                    {
                        "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/AmazonSSMManagedInstanceCore"
                    }
                ],
                "Policies": [
                    {
                        "PolicyName": "S3AndEC2Access",
                        "PolicyDocument": {
                            "Version": "2012-10-17",
                            "Statement": [
                                {
                                    "Effect": "Allow",
                                    "Action": [
                                        "s3:GetObject",
                                        "s3:PutObject",
                                        "s3:DeleteObject",
                                        "s3:ListBucket"
                                    ],
                                    "Resource": [
                                        {
                                            "Fn::GetAtt": [
                                                "S3Bucket",
                                                "Arn"
                                            ]
                                        },
                                        {
                                            "Fn::Sub": "${S3Bucket.Arn}/*"
                                        }
                                    ]
                                },
                                {
                                    "Effect": "Allow",
                                    "Action": [
                                        "ec2:DescribeInstances",
                                        "ec2:DescribeImages",
                                        "ec2:DescribeTags",
                                        "ec2:DescribeSnapshots",
                                        "ec2:DescribeSecurityGroups",
                                        "ec2:DescribeSubnets",
                                        "ec2:DescribeVpcs"
                                    ],
                                    "Resource": "*"
                                }
                            ]
                        }
                    }
                ],
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-iam-role"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "EC2InstanceProfile": {
            "Type": "AWS::IAM::InstanceProfile",
            "Properties": {
                "InstanceProfileName": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-instance-profile"
                },
                "Roles": [
                    {
                        "Ref": "EC2Role"
                    }
                ]
            }
        },
        "EC2KeyPair": {
            "Type": "AWS::EC2::KeyPair",
            "Properties": {
                "KeyName": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-${KeyPairName}"
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-keypair"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "WebSecurityGroup": {
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": {
                "GroupName": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-web-sg"
                },
                "GroupDescription": "Security group for web server",
                "VpcId": {
                    "Ref": "VPC"
                },
                "SecurityGroupIngress": [
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 80,
                        "ToPort": 80,
                        "CidrIp": "0.0.0.0/0",
                        "Description": "Allow HTTP"
                    },
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "CidrIp": "0.0.0.0/0",
                        "Description": "Allow SSH"
                    }
                ],
                "SecurityGroupEgress": [
                    {
                        "IpProtocol": -1,
                        "CidrIp": "0.0.0.0/0",
                        "Description": "Allow all outbound"
                    }
                ],
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-sg"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "DatabaseSecurityGroup": {
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": {
                "GroupName": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-sg"
                },
                "GroupDescription": "Security group for RDS database",
                "VpcId": {
                    "Ref": "VPC"
                },
                "SecurityGroupIngress": [
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 5432,
                        "ToPort": 5432,
                        "SourceSecurityGroupId": {
                            "Ref": "WebSecurityGroup"
                        },
                        "Description": "Allow PostgreSQL from web server"
                    }
                ],
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-sg"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "EC2Instance": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "ImageId": {
                    "Fn::Sub": "{{resolve:ssm:${SourceAmiIdSsmParameter}}}"
                },
                "InstanceType": "t3.micro",
                "KeyName": {
                    "Ref": "EC2KeyPair"
                },
                "IamInstanceProfile": {
                    "Ref": "EC2InstanceProfile"
                },
                "SecurityGroupIds": [
                    {
                        "Ref": "WebSecurityGroup"
                    }
                ],
                "SubnetId": {
                    "Ref": "PublicSubnet1"
                },
                "UserData": {
                    "Fn::Base64": {
                        "Fn::Sub": "#!/bin/bash\nyum update -y\nyum install -y httpd\nsystemctl start httpd\nsystemctl enable httpd\necho \"<h1>Hello from ${AWS::StackName}</h1>\" > /var/www/html/index.html\n"
                    }
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-ec2"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "ElasticIP": {
            "Type": "AWS::EC2::EIP",
            "Properties": {
                "Domain": "vpc",
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-eip"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "ElasticIPAssociation": {
            "Type": "AWS::EC2::EIPAssociation",
            "Properties": {
                "InstanceId": {
                    "Ref": "EC2Instance"
                },
                "EIP": {
                    "Ref": "ElasticIP"
                }
            }
        },
        "DBSubnetGroup": {
            "Type": "AWS::RDS::DBSubnetGroup",
            "Properties": {
                "DBSubnetGroupName": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-subnet-group"
                },
                "DBSubnetGroupDescription": "Subnet group for RDS database",
                "SubnetIds": [
                    {
                        "Ref": "PrivateSubnet1"
                    },
                    {
                        "Ref": "PrivateSubnet2"
                    }
                ],
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-subnet-group"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "DBMasterSecret": {
            "Type": "AWS::SecretsManager::Secret",
            "Properties": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-master-secret"
                },
                "Description": "RDS master password",
                "GenerateSecretString": {
                    "SecretStringTemplate": {
                        "Fn::Sub": "{\"username\": \"${DBMasterUsername}\"}"
                    },
                    "GenerateStringKey": "password",
                    "PasswordLength": 16,
                    "ExcludePunctuation": true
                }
            }
        },
        "RDSInstance": {
            "Type": "AWS::RDS::DBInstance",
            "Properties": {
                "DBInstanceIdentifier": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db"
                },
                "DBInstanceClass": {
                    "Ref": "DBInstanceClass"
                },
                "Engine": "postgres",
                "EngineVersion": "16",
                "AllocatedStorage": "20",
                "StorageType": "gp2",
                "MasterUsername": {
                    "Ref": "DBMasterUsername"
                },
                "MasterUserPassword": {
                    "Fn::Sub": "{{resolve:secretsmanager:${DBMasterSecret}:SecretString:password}}"
                },
                "DBSubnetGroupName": {
                    "Ref": "DBSubnetGroup"
                },
                "VPCSecurityGroups": [
                    {
                        "Ref": "DatabaseSecurityGroup"
                    }
                ],
                "BackupRetentionPeriod": 7,
                "PreferredBackupWindow": "03:00-04:00",
                "PreferredMaintenanceWindow": "sun:04:00-sun:05:00",
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-rds"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "VPCFlowLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
                "LogGroupName": {
                    "Fn::Sub": "/aws/vpc/flowlogs/${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}"
                },
                "RetentionInDays": 7
            }
        },
        "VPCFlowLogRole": {
            "Type": "AWS::IAM::Role",
            "Properties": {
                "RoleName": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-flowlog-role"
                },
                "AssumeRolePolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Principal": {
                                "Service": [
                                    "vpc-flow-logs.amazonaws.com"
                                ]
                            },
                            "Action": [
                                "sts:AssumeRole"
                            ]
                        }
                    ]
                },
                "Policies": [
                    {
                        "PolicyName": "CloudWatchLogPolicy",
                        "PolicyDocument": {
                            "Version": "2012-10-17",
                            "Statement": [
                                {
                                    "Effect": "Allow",
                                    "Action": [
                                        "logs:CreateLogStream",
                                        "logs:PutLogEvents",
                                        "logs:DescribeLogGroups",
                                        "logs:DescribeLogStreams"
                                    ],
                                    "Resource": {
                                        "Fn::GetAtt": [
                                            "VPCFlowLogGroup",
                                            "Arn"
                                        ]
                                    }
                                }
                            ]
                        }
                    }
                ],
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-flowlog-role"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "VPCFlowLog": {
            "Type": "AWS::EC2::FlowLog",
            "Properties": {
                "ResourceType": "VPC",
                "ResourceId": {
                    "Ref": "VPC"
                },
                "TrafficType": "ALL",
                "LogDestinationType": "cloud-watch-logs",
                "LogGroupName": {
                    "Ref": "VPCFlowLogGroup"
                },
                "DeliverLogsPermissionArn": {
                    "Fn::GetAtt": [
                        "VPCFlowLogRole",
                        "Arn"
                    ]
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-vpc-flowlog"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        },
        "CloudFrontOriginAccessIdentity": {
            "Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity",
            "Properties": {
                "CloudFrontOriginAccessIdentityConfig": {
                    "Comment": {
                        "Fn::Sub": "OAI for ${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}"
                    }
                }
            }
        },
        "CloudFrontDistribution": {
            "Type": "AWS::CloudFront::Distribution",
            "Properties": {
                "DistributionConfig": {
                    "Comment": {
                        "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-cloudfront"
                    },
                    "Origins": [
                        {
                            "DomainName": {
                                "Fn::GetAtt": [
                                    "S3Bucket",
                                    "RegionalDomainName"
                                ]
                            },
                            "Id": "S3Origin",
                            "S3OriginConfig": {
                                "OriginAccessIdentity": {
                                    "Fn::Sub": "origin-access-identity/cloudfront/${CloudFrontOriginAccessIdentity}"
                                }
                            }
                        }
                    ],
                    "Enabled": true,
                    "DefaultRootObject": "index.html",
                    "DefaultCacheBehavior": {
                        "AllowedMethods": [
                            "GET",
                            "HEAD"
                        ],
                        "TargetOriginId": "S3Origin",
                        "ViewerProtocolPolicy": "redirect-to-https",
                        "CachePolicyId": "658327ea-f89d-4fab-a63d-7e88639e58f6",
                        "Compress": true
                    },
                    "PriceClass": "PriceClass_100",
                    "ViewerCertificate": {
                        "CloudFrontDefaultCertificate": true
                    }
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-cloudfront"
                        }
                    },
                    {
                        "Key": "Environment",
                        "Value": {
                            "Ref": "EnvironmentTag"
                        }
                    },
                    {
                        "Key": "Owner",
                        "Value": {
                            "Ref": "OwnerTag"
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": {
                            "Ref": "ProjectTag"
                        }
                    }
                ]
            }
        }
    },
    "Outputs": {
        "VPCId": {
            "Description": "ID of the VPC",
            "Value": {
                "Ref": "VPC"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-vpc-id"
                }
            }
        },
        "VPCCidrBlock": {
            "Description": "CIDR block of the VPC",
            "Value": {
                "Fn::GetAtt": [
                    "VPC",
                    "CidrBlock"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-vpc-cidr"
                }
            }
        },
        "VPCDefaultNetworkAcl": {
            "Description": "Default Network ACL ID of the VPC",
            "Value": {
                "Fn::GetAtt": [
                    "VPC",
                    "DefaultNetworkAcl"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-vpc-default-nacl"
                }
            }
        },
        "VPCDefaultSecurityGroup": {
            "Description": "Default Security Group ID of the VPC",
            "Value": {
                "Fn::GetAtt": [
                    "VPC",
                    "DefaultSecurityGroup"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-vpc-default-sg"
                }
            }
        },
        "InternetGatewayId": {
            "Description": "ID of the Internet Gateway",
            "Value": {
                "Ref": "InternetGateway"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-igw-id"
                }
            }
        },
        "PublicSubnet1Id": {
            "Description": "ID of the first public subnet",
            "Value": {
                "Ref": "PublicSubnet1"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-subnet-1-id"
                }
            }
        },
        "PublicSubnet1CidrBlock": {
            "Description": "CIDR block of the first public subnet",
            "Value": {
                "Ref": "PublicSubnet1Cidr"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-subnet-1-cidr"
                }
            }
        },
        "PublicSubnet1AvailabilityZone": {
            "Description": "Availability Zone of the first public subnet",
            "Value": {
                "Fn::GetAtt": [
                    "PublicSubnet1",
                    "AvailabilityZone"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-subnet-1-az"
                }
            }
        },
        "PublicSubnet2Id": {
            "Description": "ID of the second public subnet",
            "Value": {
                "Ref": "PublicSubnet2"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-subnet-2-id"
                }
            }
        },
        "PublicSubnet2CidrBlock": {
            "Description": "CIDR block of the second public subnet",
            "Value": {
                "Ref": "PublicSubnet2Cidr"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-subnet-2-cidr"
                }
            }
        },
        "PublicSubnet2AvailabilityZone": {
            "Description": "Availability Zone of the second public subnet",
            "Value": {
                "Fn::GetAtt": [
                    "PublicSubnet2",
                    "AvailabilityZone"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-subnet-2-az"
                }
            }
        },
        "PrivateSubnet1Id": {
            "Description": "ID of the first private subnet",
            "Value": {
                "Ref": "PrivateSubnet1"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-private-subnet-1-id"
                }
            }
        },
        "PrivateSubnet1CidrBlock": {
            "Description": "CIDR block of the first private subnet",
            "Value": {
                "Ref": "PrivateSubnet1Cidr"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-private-subnet-1-cidr"
                }
            }
        },
        "PrivateSubnet1AvailabilityZone": {
            "Description": "Availability Zone of the first private subnet",
            "Value": {
                "Fn::GetAtt": [
                    "PrivateSubnet1",
                    "AvailabilityZone"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-private-subnet-1-az"
                }
            }
        },
        "PrivateSubnet2Id": {
            "Description": "ID of the second private subnet",
            "Value": {
                "Ref": "PrivateSubnet2"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-private-subnet-2-id"
                }
            }
        },
        "PrivateSubnet2CidrBlock": {
            "Description": "CIDR block of the second private subnet",
            "Value": {
                "Ref": "PrivateSubnet2Cidr"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-private-subnet-2-cidr"
                }
            }
        },
        "PrivateSubnet2AvailabilityZone": {
            "Description": "Availability Zone of the second private subnet",
            "Value": {
                "Fn::GetAtt": [
                    "PrivateSubnet2",
                    "AvailabilityZone"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-private-subnet-2-az"
                }
            }
        },
        "PublicRouteTableId": {
            "Description": "ID of the public route table",
            "Value": {
                "Ref": "PublicRouteTable"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-public-rt-id"
                }
            }
        },
        "S3BucketName": {
            "Description": "Name of the S3 bucket",
            "Value": {
                "Ref": "S3Bucket"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-s3-bucket-name"
                }
            }
        },
        "S3BucketArn": {
            "Description": "ARN of the S3 bucket",
            "Value": {
                "Fn::GetAtt": [
                    "S3Bucket",
                    "Arn"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-s3-bucket-arn"
                }
            }
        },
        "S3BucketWebsiteURL": {
            "Description": "S3 bucket website endpoint",
            "Value": {
                "Fn::GetAtt": [
                    "S3Bucket",
                    "WebsiteURL"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-s3-website-url"
                }
            }
        },
        "S3BucketRegionalDomainName": {
            "Description": "Regional domain name of the S3 bucket",
            "Value": {
                "Fn::GetAtt": [
                    "S3Bucket",
                    "RegionalDomainName"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-s3-regional-domain"
                }
            }
        },
        "EC2RoleArn": {
            "Description": "ARN of the EC2 IAM role",
            "Value": {
                "Fn::GetAtt": [
                    "EC2Role",
                    "Arn"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-ec2-role-arn"
                }
            }
        },
        "EC2InstanceProfileArn": {
            "Description": "ARN of the EC2 instance profile",
            "Value": {
                "Fn::GetAtt": [
                    "EC2InstanceProfile",
                    "Arn"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-instance-profile-arn"
                }
            }
        },
        "WebSecurityGroupId": {
            "Description": "ID of the web security group",
            "Value": {
                "Ref": "WebSecurityGroup"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-web-sg-id"
                }
            }
        },
        "WebSecurityGroupName": {
            "Description": "Name of the web security group",
            "Value": {
                "Fn::GetAtt": [
                    "WebSecurityGroup",
                    "GroupName"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-web-sg-name"
                }
            }
        },
        "DatabaseSecurityGroupId": {
            "Description": "ID of the database security group",
            "Value": {
                "Ref": "DatabaseSecurityGroup"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-sg-id"
                }
            }
        },
        "DatabaseSecurityGroupName": {
            "Description": "Name of the database security group",
            "Value": {
                "Fn::GetAtt": [
                    "DatabaseSecurityGroup",
                    "GroupName"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-sg-name"
                }
            }
        },
        "EC2KeyPairId": {
            "Description": "ID of the EC2 key pair",
            "Value": {
                "Ref": "EC2KeyPair"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-keypair-id"
                }
            }
        },
        "EC2KeyPairFingerprint": {
            "Description": "Fingerprint of the EC2 key pair",
            "Value": {
                "Fn::GetAtt": [
                    "EC2KeyPair",
                    "KeyFingerprint"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-keypair-fingerprint"
                }
            }
        },
        "EC2InstanceId": {
            "Description": "Instance ID of the EC2 instance",
            "Value": {
                "Ref": "EC2Instance"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-ec2-instance-id"
                }
            }
        },
        "EC2InstancePrivateIp": {
            "Description": "Private IP address of the EC2 instance",
            "Value": {
                "Fn::GetAtt": [
                    "EC2Instance",
                    "PrivateIp"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-ec2-private-ip"
                }
            }
        },
        "EC2InstancePrivateDnsName": {
            "Description": "Private DNS name of the EC2 instance",
            "Value": {
                "Fn::GetAtt": [
                    "EC2Instance",
                    "PrivateDnsName"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-ec2-private-dns"
                }
            }
        },
        "EC2InstanceAvailabilityZone": {
            "Description": "Availability Zone of the EC2 instance",
            "Value": {
                "Fn::GetAtt": [
                    "EC2Instance",
                    "AvailabilityZone"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-ec2-az"
                }
            }
        },
        "InstanceImageId": {
            "Description": "AMI ID used for the EC2 instance",
            "Value": {
                "Fn::Sub": "{{resolve:ssm:${SourceAmiIdSsmParameter}}}"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-instance-ami-id"
                }
            }
        },
        "ElasticIPAddress": {
            "Description": "Elastic IP address",
            "Value": {
                "Ref": "ElasticIP"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-elastic-ip"
                }
            }
        },
        "ElasticIPAllocationId": {
            "Description": "Allocation ID of the Elastic IP",
            "Value": {
                "Fn::GetAtt": [
                    "ElasticIP",
                    "AllocationId"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-elastic-ip-allocation-id"
                }
            }
        },
        "RDSInstanceId": {
            "Description": "RDS database instance identifier",
            "Value": {
                "Ref": "RDSInstance"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-rds-instance-id"
                }
            }
        },
        "RDSEndpoint": {
            "Description": "RDS database endpoint address",
            "Value": {
                "Fn::GetAtt": [
                    "RDSInstance",
                    "Endpoint.Address"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-rds-endpoint"
                }
            }
        },
        "RDSPort": {
            "Description": "RDS database port",
            "Value": {
                "Fn::GetAtt": [
                    "RDSInstance",
                    "Endpoint.Port"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-rds-port"
                }
            }
        },
        "DBSubnetGroupName": {
            "Description": "Name of the DB subnet group",
            "Value": {
                "Ref": "DBSubnetGroup"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-subnet-group-name"
                }
            }
        },
        "DBSecretArn": {
            "Description": "ARN of the database master secret",
            "Value": {
                "Ref": "DBMasterSecret"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-master-secret-arn"
                }
            }
        },
        "VPCFlowLogGroupArn": {
            "Description": "ARN of the VPC Flow Log CloudWatch Log Group",
            "Value": {
                "Fn::GetAtt": [
                    "VPCFlowLogGroup",
                    "Arn"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-flowlog-group-arn"
                }
            }
        },
        "VPCFlowLogId": {
            "Description": "ID of the VPC Flow Log",
            "Value": {
                "Ref": "VPCFlowLog"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-vpc-flowlog-id"
                }
            }
        },
        "VPCFlowLogRoleArn": {
            "Description": "ARN of the VPC Flow Log IAM role",
            "Value": {
                "Fn::GetAtt": [
                    "VPCFlowLogRole",
                    "Arn"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-flowlog-role-arn"
                }
            }
        },
        "CloudFrontDistributionId": {
            "Description": "CloudFront distribution ID",
            "Value": {
                "Ref": "CloudFrontDistribution"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-cloudfront-id"
                }
            }
        },
        "CloudFrontDomainName": {
            "Description": "CloudFront distribution domain name",
            "Value": {
                "Fn::GetAtt": [
                    "CloudFrontDistribution",
                    "DomainName"
                ]
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-cloudfront-domain"
                }
            }
        },
        "CloudFrontDistributionURL": {
            "Description": "CloudFront distribution URL",
            "Value": {
                "Fn::Sub": "https://${CloudFrontDistribution.DomainName}"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-cloudfront-url"
                }
            }
        },
        "CloudFrontOriginAccessIdentityId": {
            "Description": "CloudFront Origin Access Identity ID",
            "Value": {
                "Ref": "CloudFrontOriginAccessIdentity"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-oai-id"
                }
            }
        },
        "StackName": {
            "Description": "Name of the CloudFormation stack",
            "Value": {
                "Ref": "AWS::StackName"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-stack-name"
                }
            }
        },
        "StackRegion": {
            "Description": "AWS Region where the stack is deployed",
            "Value": {
                "Ref": "AWS::Region"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-stack-region"
                }
            }
        },
        "EnvironmentSuffix": {
            "Description": "Environment suffix used for resource naming",
            "Value": {
                "Ref": "EnvironmentSuffix"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-environment-suffix"
                }
            }
        },
        "VPCCidrParameter": {
            "Description": "VPC CIDR parameter value",
            "Value": {
                "Ref": "VPCCidr"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-vpc-cidr-param"
                }
            }
        },
        "DBInstanceClass": {
            "Description": "RDS instance class used",
            "Value": {
                "Ref": "DBInstanceClass"
            },
            "Export": {
                "Name": {
                    "Fn::Sub": "${AWS::StackName}-${AWS::Region}-${EnvironmentSuffix}-db-instance-class"
                }
            }
        }
    }
}