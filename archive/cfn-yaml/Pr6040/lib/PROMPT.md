Create a complete single CloudFormation YAML template that will orchestrate the migration from our existing development environment to a robust, production-ready infrastructure. This template must define a VPC with CIDR 10.0.0.0/16 that spans three availability zones for high availability, incorporating both public and private subnets to properly isolate different tiers of our application. The public subnets should be allocated as 10.0.1.0/24, 10.0.2.0/24, and 10.0.3.0/24, while private subnets for the application tier should use 10.0.10.0/24, 10.0.11.0/24, and 10.0.12.0/24, and database tier subnets should utilize 10.0.20.0/24, 10.0.21.0/24, and 10.0.22.0/24. You'll need NAT Gateways in each availability zone to ensure high availability for outbound internet access from private subnets.

For the application layer, configure an Application Load Balancer in the public subnets with an HTTPS listener on port 443 and proper SSL certificate configuration, which should be parameterized for flexibility. The ALB must include health checks pointing to /health endpoint with appropriate intervals and timeouts, and implement automatic HTTP to HTTPS redirection. Behind the load balancer, set up an Auto Scaling Group using a launch template for t3.large EC2 instances running Amazon Linux 2023, with the instance type parameterized for different environments. The Auto Scaling Group should maintain between 3 and 9 instances with a desired capacity of 6, implementing CPU-based scaling policies that trigger scale-up at 70% utilization and scale-down at 30%.

The database layer requires deploying an RDS Aurora MySQL 8.0 cluster with one writer instance using db.r6g.xlarge and two reader instances using db.r6g.large, distributed across multiple availability zones for fault tolerance. This Aurora cluster must use encrypted storage with AWS managed KMS keys and maintain automated backups for at least 30 days to meet compliance requirements. Enable Performance Insights with 7-day retention and ensure deletion protection is activated. Remember that all database credentials must reference AWS Systems Manager Parameter Store rather than being hardcoded in the template, as per security best practices.

Storage requirements include creating two S3 buckets with distinct configurations. The application logs bucket needs server-side encryption using S3-managed keys (SSE-S3), versioning enabled, and a lifecycle policy that transitions objects to Glacier after 90 days. The database backup bucket requires stronger encryption using KMS, versioning, and must be configured for potential cross-region replication with MFA delete protection. Both buckets must block all public access and have AWS Config rules monitoring to ensure encryption and versioning remain enabled at all times.

Security group configuration is critical for maintaining proper network isolation. The ALB security group should only allow inbound traffic on ports 443 and 80 from the internet, while the application security group should only accept traffic from the ALB security group on port 80. The database security group must be even more restrictive, only allowing MySQL connections on port 3306 from the application security group, with all other traffic denied except for response packets.

Implement comprehensive monitoring using CloudWatch alarms that trigger when EC2 CPU utilization exceeds 80% for two consecutive periods, Aurora database connections reach 80% of maximum capacity, any ALB targets become unhealthy, or target response time exceeds 2 seconds. All alarms should notify a configurable SNS topic that sends alerts to the operations team. Additionally, set up AWS Config with a recorder and rules to continuously monitor that all S3 buckets have encryption enabled and versioning configured, RDS instances use encrypted storage, and all resources have required tags including Environment, Project, and Owner.

Ensure your template follows AWS Well-Architected Framework principles for security, reliability, performance efficiency, cost optimization, and compliance standards required for PCI DSS certification.