Create a single CloudFormation template that establishes a comprehensive enterprise ready cloud environment to serve as the foundational infrastructure for a modern application deployment. Your solution should architect a secure, scalable network topology beginning with a VPC configured with the 10.0.0.0/16 CIDR block, which will serve as the isolated network boundary for all resources. Within this VPC, you need to implement a multi availability zone design by provisioning two subnets across different AZs to ensure high availability and fault tolerance, where these subnets should be properly sized to accommodate future growth while maintaining efficient IP address allocation.

The networking architecture requires establishing internet connectivity through an Internet Gateway that must be properly attached to the VPC, accompanied by appropriately configured route tables that enable outbound internet access for resources within the subnets. This connectivity pattern should support a compute instance that you'll deploy using an EC2 configuration of your choosing, selecting an appropriate AMI that aligns with modern deployment practices, and this instance should be associated with an Elastic IP address to maintain a consistent public endpoint. The security posture of this environment demands implementing a Security Group that carefully controls inbound traffic, specifically permitting HTTP traffic on port 80 and SSH access on port 22, while maintaining the principle of least privilege for all other traffic patterns.

From an identity and access management perspective, the template should establish IAM roles with precisely scoped permissions that enable the EC2 instance to interact with S3 storage services, implementing the necessary trust relationships and policy attachments to facilitate secure cross service communication. The storage layer requires provisioning two distinct S3 buckets: one general purpose bucket with versioning enabled to protect against accidental deletions and provide data recovery capabilities, and a dedicated logging bucket that will centralize all system and application logs for compliance and troubleshooting purposes. Both storage solutions must implement encryption at rest using AWS managed keys to meet security compliance requirements, and similarly, any EBS volumes attached to the EC2 instance should also be encrypted.

The operational excellence of this environment depends on comprehensive monitoring and alerting capabilities, which should be implemented through CloudWatch with detailed monitoring enabled on the EC2 instance to capture granular performance metrics. You should configure a CloudWatch alarm that triggers when CPU utilization exceeds 80%, ensuring proactive notification of potential performance issues. Throughout the entire template, implement a consistent tagging strategy that applies cost allocation tags to all resources, enabling accurate cost tracking and resource governance across the organization.

Your CloudFormation template should conclude with well defined outputs that expose critical resource identifiers including the VPC ID, both Subnet IDs, and the EC2 instance ID, making these values readily available for cross stack references or external consumption. The entire solution must adhere to AWS CloudFormation best practices, utilizing intrinsic functions appropriately, maintaining proper resource dependencies and ensuring the template passes validation checks for deployment readiness. The final deliverable should be a single, cohesive YAML file that orchestrates the creation of all these interconnected resources in a deterministic and repeatable manner.