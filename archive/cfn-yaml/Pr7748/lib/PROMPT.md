Create a single CloudFormation template that establishes a comprehensive web application infrastructure on AWS, designed to handle a data processing pipeline with strict security and cost constraints.

The architecture should elegantly integrate an API Gateway as the primary entry point for user interactions, which seamlessly triggers Lambda functions responsible for processing incoming data streams. These processed results need to be stored in an S3 bucket configured with versioning to maintain data integrity and historical records. To optimize storage costs while maintaining compliance requirements, the system must automatically transition aging objects to Glacier storage after 30 days, with SNS notifications alerting relevant teams when these transitions occur.

For structured data requirements, incorporate an RDS database instance that ensures business continuity through multi AZ deployment and automated backup strategies. The entire infrastructure must operate within a carefully designed VPC architecture spanning two availability zones, with public subnets hosting internet facing resources and private subnets securing backend components. Private subnet resources should maintain outbound internet connectivity through NAT Gateways while remaining inaccessible from external networks.

Security considerations are paramount throughout the design. All inter service communications must utilize SSL/TLS encryption, IAM roles and policies should enforce least privilege access patterns, and security groups must restrict network access to trusted sources only. The infrastructure requires comprehensive observability through CloudWatch monitoring for all deployed resources and CloudTrail auditing for account level activity tracking.

Given the startup nature of this project, the entire monthly AWS operational cost must remain under $100, requiring careful selection of instance types, storage classes, and service configurations. All resources should be properly tagged with environment designation (dev/prod) and ownership information for cost allocation and management purposes.

Your CloudFormation template should be written in YAML format and must successfully validate against AWS CloudFormation standards. The stack outputs should expose critical resource identifiers for integration with other systems and documentation purposes. Ensure the template follows AWS best practices for security, performance, and cost optimization while maintaining the flexibility to deploy across any AWS region.