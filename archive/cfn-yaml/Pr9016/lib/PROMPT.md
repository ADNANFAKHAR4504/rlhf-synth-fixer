Create a single CloudFormation template that establishes a complete production ready infrastructure environment, demonstrating enterprise grade configuration management and deployment practices. Your template should orchestrate the provisioning of interconnected AWS services that work together to form a cohesive production ecosystem where an EC2 compute instance can securely interact with S3 storage resources through properly configured IAM permissions and network security boundaries.

The infrastructure you're designing represents a typical production scenario where versioned data storage is critical for business continuity and disaster recovery. Therefore, your S3 bucket configuration must incorporate versioning capabilities to maintain a complete history of object modifications, ensuring data can be recovered from any point in time. This storage resource should be seamlessly integrated with compute resources through a carefully crafted IAM role that grants read only access, following the principle of least privilege that's essential in production environments.

For the compute layer, provision an EC2 instance that meets production performance requirements by utilizing at least a t3.micro instance type, which provides burstable performance suitable for variable workloads. The instance must be configured to use an existing AWS key pair for SSH access, enabling secure administrative access while maintaining key management best practices. Network security should be implemented through a dedicated security group that restricts SSH access on port 22 to a specific IP address, creating a hardened perimeter that protects against unauthorized access attempts.

Throughout your template, implement a consistent resource naming strategy using the 'Prod' prefix for all resources, which enables clear identification and organization of production assets within the AWS console and CLI interfaces. Additionally, apply standardized tagging with 'Environment: Production' across all resources to support cost allocation, compliance tracking, and automated governance policies that are typical in enterprise environments.

Your CloudFormation template must demonstrate proper dependency management between resources, ensuring that the IAM role is created before the EC2 instance attempts to assume it, and that the instance profile is properly attached. The template should be structured to pass AWS CloudFormation validation without errors, incorporating all necessary resource properties, intrinsic functions, and parameter definitions that make it both functional and maintainable.

The expected deliverable is a complete single YAML formatted CloudFormation template that meets these technical requirements and aws best practices.