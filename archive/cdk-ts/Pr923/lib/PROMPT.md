I need to create a secure AWS cloud infrastructure that follows security best practices and is easy to manage. The infrastructure should include:

1. A secure VPC with proper network segmentation including public and private subnets
2. Security groups and Network ACLs configured with least privilege access
3. An encrypted S3 bucket for data storage with proper access controls
4. A KMS key for encryption management 
5. IAM roles and policies following principle of least privilege
6. GuardDuty for threat detection
7. VPC Flow Logs for network monitoring

The solution should be deployable in the us-west-2 region and include the latest AWS security features like GuardDuty Extended Threat Detection and enhanced Security Hub integration where applicable. Make sure to use proper resource naming conventions and implement infrastructure that can be easily managed and maintained.

Please provide the infrastructure code with one code block per file that can be directly deployed.