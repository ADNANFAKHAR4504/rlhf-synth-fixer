# =============================================================================
# Terraform Variables Configuration Example
# PCI-DSS Compliant Retail API Platform
# =============================================================================
#
# Instructions:
# 1. Copy this file to terraform.tfvars: cp terraform.tfvars.example terraform.tfvars
# 2. Update the values according to your deployment requirements
# 3. Never commit terraform.tfvars to version control (it may contain sensitive data)
#
# =============================================================================

# -----------------------------------------------------------------------------
# AWS Configuration
# -----------------------------------------------------------------------------

# AWS region for deployment
# Recommendation: Choose region closest to your users for lower latency
aws_region = "us-east-1"

# Environment name (dev, staging, prod)
# This affects resource naming and some default behaviors
environment = "dev"

# Environment suffix for resource naming (optional)
# Leave empty for auto-generated random suffix to avoid naming conflicts
# Use specific value for consistent naming (e.g., "001", "blue", "green")
environment_suffix = ""

# -----------------------------------------------------------------------------
# Project Configuration
# -----------------------------------------------------------------------------

# Project name used for resource naming and tagging
project_name = "retail-api"

# -----------------------------------------------------------------------------
# API Gateway Configuration
# -----------------------------------------------------------------------------

# API Gateway throttle burst limit
# Maximum number of concurrent requests allowed
# Production recommendation: 200-500 depending on expected traffic
api_throttle_burst_limit = 100

# API Gateway throttle rate limit (requests per second)
# Steady-state request rate limit per API key or IP
# Production recommendation: 100-500 depending on expected load
api_throttle_rate_limit = 50

# -----------------------------------------------------------------------------
# Monitoring & Logging Configuration
# -----------------------------------------------------------------------------

# CloudWatch log retention in days
# PCI-DSS Requirement: Minimum 365 days for compliance
# Recommendation: 400-730 days for production environments
log_retention_days = 400

# Enable AWS X-Ray distributed tracing
# Provides detailed request tracing and performance insights
# Recommendation: true for production, adds minimal cost
enable_xray_tracing = true

# -----------------------------------------------------------------------------
# DynamoDB Configuration
# -----------------------------------------------------------------------------

# DynamoDB billing mode
# Options:
#   - PAY_PER_REQUEST: Auto-scaling, pay only for what you use (recommended for variable workloads)
#   - PROVISIONED: Fixed capacity, predictable costs (recommended for steady workloads)
dynamodb_billing_mode = "PAY_PER_REQUEST"

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------

# List of IP ranges to block in AWS WAF (CIDR notation)
# Use this for incident response and blocking known malicious IPs
# Example: ["192.0.2.0/24", "198.51.100.0/24"]
# Leave empty for no IP blocking
waf_block_ip_list = []

# Examples of when to use IP blocking:
# - During active DDoS attack: waf_block_ip_list = ["203.0.113.0/24"]
# - Block specific bad actors: waf_block_ip_list = ["192.0.2.44/32", "198.51.100.88/32"]
# - Geographic blocking: Use WAF geo-match instead (not configured in this template)

# -----------------------------------------------------------------------------
# Alerting Configuration
# -----------------------------------------------------------------------------

# Email address for CloudWatch alerts and alarms
# IMPORTANT: Update this before deployment!
# All critical alarms (5XX errors, throttling, WAF blocks) will be sent here
# Recommendation: Use a distribution list or on-call rotation email
alert_email = "platform-team@example.com"

# Note: After deployment, you must confirm the SNS subscription by clicking
# the confirmation link sent to this email address

# =============================================================================
# Production Deployment Checklist
# =============================================================================
#
# Before deploying to production, ensure you have:
#
# ✅ Security:
#    - Updated alert_email to your team's actual email
#    - Reviewed waf_block_ip_list for any known threats
#    - Confirmed log_retention_days >= 365 for PCI-DSS compliance
#    - Consider enabling AWS_IAM authorization on API endpoints (currently NONE for testing)
#
# ✅ Performance:
#    - Set appropriate api_throttle_burst_limit and api_throttle_rate_limit
#    - Chosen correct dynamodb_billing_mode based on workload pattern
#    - Enabled enable_xray_tracing for performance monitoring
#
# ✅ Cost Optimization:
#    - Reviewed DynamoDB billing mode (PAY_PER_REQUEST vs PROVISIONED)
#    - Set log_retention_days based on compliance needs (longer = more cost)
#    - Monitored X-Ray costs if high traffic (10% sampling by default)
#
# ✅ Compliance:
#    - Verified environment = "prod" for production
#    - Confirmed log retention >= 365 days (PCI-DSS requirement)
#    - Documented any changes to security controls
#
# =============================================================================
# Cost Estimates (Monthly - US East 1)
# =============================================================================
#
# Based on moderate usage (10,000 API requests/day):
#
# - API Gateway:          ~$3.50
# - Lambda:              ~$0.20 (1M requests free tier)
# - DynamoDB:            ~$2.50 (PAY_PER_REQUEST, 25GB data)
# - WAF:                 ~$10.00 (Web ACL + 4 rules + log storage)
# - CloudWatch:          ~$5.00 (logs + metrics + alarms)
# - KMS:                 ~$1.00
# - X-Ray:               ~$0.50 (10% sampling)
# - SNS:                 ~$0.50
# - S3:                  ~$1.00 (analytics bucket)
#
# TOTAL: ~$24/month (excluding data transfer and high traffic)
#
# Note: Costs scale with traffic. High traffic may significantly increase costs.
#
# =============================================================================

