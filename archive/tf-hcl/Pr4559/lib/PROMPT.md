A media platform needs to deliver licensed video content to about twenty thousand daily users while enforcing geo-restrictions to comply with regional distribution agreements. The system should maintain low latency, secure content at rest and in transit, and provide detailed access logging for compliance and analytics. Use Terraform to define the entire infrastructure and output only a single file named tap_stack.tf with no explanations or additional text.

Set up Amazon S3 as the origin for storing the media content, ensuring bucket policies block all public access. Use Amazon CloudFront as the CDN layer configured with geo-restriction rules that allow or deny access based on specified countries or regions, and attach an ACM SSL certificate to enforce HTTPS. Integrate Route 53 for domain name management, mapping user traffic to the CloudFront distribution. Configure CloudWatch to collect access metrics and performance data, and send detailed access logs from CloudFront to a dedicated S3 bucket secured with KMS encryption. All IAM roles and policies should follow the least-privilege principle, ensuring only required services have access to the content or logs. The final output must include the complete Terraform code in tap_stack.tfâ€”only the code, no explanations, comments, or extra output.