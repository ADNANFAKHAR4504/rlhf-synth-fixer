Hey, I'm setting up a new ElastiCache Redis cluster for a project, and I need a Terraform configuration for it. The main thing is that it needs to be highly available with automatic failover, so I'm looking for a replication group setup. Specifically, one primary node and two read replicas should do the trick. For the Redis engine, let's go with version 7.0 or something newer if that's available; I think that's the current best practice for performance and features. To keep costs down, I'd prefer to use cache.t3.micro node types. This is pretty standard for our development environments, and it helps manage our AWS spend, so we don't blow the budget. So basically, a robust, cost-effective Redis cluster.

For security, we definitely need to lock this down. Encryption in transit using TLS is a must-have to protect our data, especially since we're dealing with sensitive application state. Also, I need a dedicated security group that only allows access to Redis port 6379 from our internal network, which is the 10.0.0.0/16 CIDR block. Nothing public should be able to hit this cluster at all. On top of that, we absolutely need to disable the Redis KEYS command in the parameter group for security reasons; that's a critical vulnerability we want to avoid in any production-like environment. We need to make sure this is all deployed in the ap-south-1 region, as that's where the rest of our infrastructure for this project resides.

Regarding monitoring and backups, let's set up automatic backups with a 7-day retention period. That gives us enough history if we ever need to restore, and it's a good balance between data safety and storage costs. We should also apply our standard tags: Environment, Project, and Owner to all resources for better management, cost allocation, and overall visibility within our AWS account. This helps us keep track of everything easily.

For the network setup, the subnet group needs to span at least two availability zones with new VPC. This is crucial for ensuring high availability and proper network segmentation, making sure our Redis cluster is resilient to AZ outages. Also, it's important that this integrates seamlessly with our current VPC structure.

For file organization, just put everything in main.tf. I mean everything - the terraform and provider blocks at the top with AWS provider version 5.0 or higher, then data sources for getting the account ID and region, then variables for things like environment and project name, then locals for common_tags and any reusable config, then a random_string resource for unique naming (8 chars, no special chars, lowercase only), then all the infrastructure resources organized with clear comment headers, and finally all the outputs at the bottom. Keep it all in one file, it's easier to manage and review for this type of focused infrastructure.

Oh, and make sure the maintenance window is set to Sunday between 3:00 AM and 4:00 AM UTC. This is our standard off-peak window for maintenance activities, so it minimizes any potential disruption to our services. Finally, I'll need the primary endpoint address and the reader endpoint address as outputs from the Terraform configuration so our applications can connect to the cluster easily. That's pretty much everything I need. Let me know if anything's unclear or if you have any questions.