# Terraform S3 Backend Configuration
# This file contains the backend configuration for storing Terraform state in S3

# S3 bucket for storing Terraform state files
bucket = "iac-rlhf-tf-states"

# State file key (path within the bucket)
# Uses environment suffix if available, otherwise defaults to 'dev'
key = "dev/terraform.tfstate"

# AWS region for the S3 bucket and DynamoDB table
region = "us-east-1"

# DynamoDB table for state locking (prevents concurrent modifications)
# dynamodb_table = "iac-rlhf-terraform-locks"
# TF_INIT_OPTS="-backend-config=backend.conf" npm run tf:init

# Enable server-side encryption for state files
encrypt = true

# Enable state locking (requires DynamoDB table)
# This prevents multiple users from modifying the same state simultaneously
use_lockfile = true

# Optional: Enable access logging for the S3 bucket
# access_logs_bucket = "iac-rlhf-terraform-logs"

# Optional: Enable versioning for the S3 bucket
# versioning = true