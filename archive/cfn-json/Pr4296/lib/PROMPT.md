Create a CloudFormation template in JSON format to establish a production-level AWS infrastructure environment in the us-west-2 region. Define a Virtual Private Cloud with CIDR block 10.0.0.0/16 containing two public subnets with CIDR blocks 10.0.1.0/24 and 10.0.2.0/24, and two private subnets with CIDR blocks 10.0.3.0/24 and 10.0.4.0/24. Set up an Internet Gateway attached to the VPC and configure route tables to enable Internet access for public subnets via the Internet Gateway, while private subnets should access the internet through a NAT Gateway deployed in a public subnet. Define security groups permitting HTTP traffic on port 80 and HTTPS traffic on port 443 from any source for web server instances. Provision compute resources by deploying one EC2 instance in each public subnet and an RDS database instance in one of the private subnets, ensuring the RDS instance is not publicly accessible. Deploy an Elastic Load Balancer configured to listen on port 80 and distribute incoming traffic across the EC2 instances. Implement auto-scaling policies for EC2 instances based on CPU utilization metrics. Ensure all sensitive data is encrypted at rest and in transit, and tag all resources with Name and Environment set to Production for proper identification and management.
