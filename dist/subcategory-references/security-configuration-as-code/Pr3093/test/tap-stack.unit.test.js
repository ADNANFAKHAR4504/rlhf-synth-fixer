"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
const environmentSuffix = process.env.ENVIRONMENT_SUFFIX || 'dev';
describe('TapStack CloudFormation Template - SaaS Encryption Standards', () => {
    let template;
    beforeAll(() => {
        const templatePath = path_1.default.join(__dirname, '../lib/TapStack.json');
        const templateContent = fs_1.default.readFileSync(templatePath, 'utf8');
        template = JSON.parse(templateContent);
    });
    describe('Template Structure and Metadata', () => {
        test('should have valid CloudFormation format version', () => {
            expect(template.AWSTemplateFormatVersion).toBe('2010-09-09');
        });
        test('should have encryption standards description', () => {
            expect(template.Description).toBeDefined();
            expect(template.Description).toBe('SaaS Encryption Standards Enforcement Template - Compliant with cfn-nag and AWS Config');
        });
        test('should have CloudFormation Interface metadata', () => {
            expect(template.Metadata).toBeDefined();
            expect(template.Metadata['AWS::CloudFormation::Interface']).toBeDefined();
            expect(template.Metadata['AWS::CloudFormation::Interface'].ParameterGroups).toBeDefined();
            expect(template.Metadata['AWS::CloudFormation::Interface'].ParameterLabels).toBeDefined();
        });
    });
    describe('Parameters Validation', () => {
        test('should have Environment parameter with correct configuration', () => {
            expect(template.Parameters.Environment).toBeDefined();
            const envParam = template.Parameters.Environment;
            expect(envParam.Type).toBe('String');
            expect(envParam.Default).toBe('production');
            expect(envParam.AllowedValues).toEqual(['development', 'staging', 'production']);
            expect(envParam.Description).toBe('Environment name for resource tagging');
        });
        test('should have MFAAge parameter for multi-factor authentication', () => {
            expect(template.Parameters.MFAAge).toBeDefined();
            const mfaParam = template.Parameters.MFAAge;
            expect(mfaParam.Type).toBe('Number');
            expect(mfaParam.Default).toBe(3600);
            expect(mfaParam.Description).toBe('Maximum age in seconds for MFA authentication (default 1 hour)');
        });
        test('should have KMSKeyArn parameter for custom encryption key', () => {
            expect(template.Parameters.KMSKeyArn).toBeDefined();
            const kmsParam = template.Parameters.KMSKeyArn;
            expect(kmsParam.Type).toBe('String');
            expect(kmsParam.Default).toBe('');
            expect(kmsParam.Description).toBe('Optional KMS key ARN for S3 encryption (leave empty for AWS managed key)');
        });
    });
    describe('Conditions for KMS Key Management', () => {
        test('should have UseCustomKMS condition', () => {
            expect(template.Conditions.UseCustomKMS).toBeDefined();
            const condition = template.Conditions.UseCustomKMS;
            expect(condition['Fn::Not']).toBeDefined();
            expect(condition['Fn::Not'][0]['Fn::Equals']).toEqual([{ 'Ref': 'KMSKeyArn' }, '']);
        });
        test('should have UseDefaultKMS condition', () => {
            expect(template.Conditions.UseDefaultKMS).toBeDefined();
            const condition = template.Conditions.UseDefaultKMS;
            expect(condition['Fn::Equals']).toEqual([{ 'Ref': 'KMSKeyArn' }, '']);
        });
    });
    describe('KMS Encryption Resources', () => {
        test('should have EncryptionKey with proper configuration', () => {
            expect(template.Resources.EncryptionKey).toBeDefined();
            const key = template.Resources.EncryptionKey;
            expect(key.Type).toBe('AWS::KMS::Key');
            expect(key.Condition).toBe('UseDefaultKMS');
            expect(key.Properties.Description).toBe('Master key for encryption compliance');
            expect(key.Properties.EnableKeyRotation).toBe(true);
        });
        test('should have EncryptionKey with comprehensive key policy', () => {
            const key = template.Resources.EncryptionKey;
            const keyPolicy = key.Properties.KeyPolicy;
            expect(keyPolicy.Version).toBe('2012-10-17');
            expect(keyPolicy.Statement).toHaveLength(2);
            // Check root permissions statement
            const rootStatement = keyPolicy.Statement.find((s) => s.Sid === 'Enable IAM User Permissions');
            expect(rootStatement).toBeDefined();
            expect(rootStatement.Effect).toBe('Allow');
            expect(rootStatement.Action).toBe('kms:*');
            // Check service permissions statement
            const serviceStatement = keyPolicy.Statement.find((s) => s.Sid === 'Allow use of the key for encryption');
            expect(serviceStatement).toBeDefined();
            expect(serviceStatement.Principal.Service).toEqual(['s3.amazonaws.com', 'ec2.amazonaws.com', 'config.amazonaws.com']);
        });
        test('should have EncryptionKeyAlias with correct naming', () => {
            expect(template.Resources.EncryptionKeyAlias).toBeDefined();
            const alias = template.Resources.EncryptionKeyAlias;
            expect(alias.Type).toBe('AWS::KMS::Alias');
            expect(alias.Condition).toBe('UseDefaultKMS');
            expect(alias.Properties.AliasName).toEqual({ 'Fn::Sub': 'alias/encryption-compliance-${Environment}' });
            expect(alias.Properties.TargetKeyId).toEqual({ 'Ref': 'EncryptionKey' });
        });
    });
    describe('S3 Buckets and Encryption Policies', () => {
        test('should have ApplicationDataBucket with mandatory encryption', () => {
            expect(template.Resources.ApplicationDataBucket).toBeDefined();
            const bucket = template.Resources.ApplicationDataBucket;
            expect(bucket.Type).toBe('AWS::S3::Bucket');
            expect(bucket.Properties.BucketName).toEqual({ 'Fn::Sub': 'saas-app-data-${AWS::AccountId}-${Environment}' });
            expect(bucket.Properties.BucketEncryption.ServerSideEncryptionConfiguration).toBeDefined();
        });
        test('should have ApplicationDataBucket with conditional KMS encryption', () => {
            const bucket = template.Resources.ApplicationDataBucket;
            const encryption = bucket.Properties.BucketEncryption.ServerSideEncryptionConfiguration[0].ServerSideEncryptionByDefault;
            expect(encryption.SSEAlgorithm).toEqual({ 'Fn::If': ['UseCustomKMS', 'aws:kms', 'AES256'] });
            expect(encryption.KMSMasterKeyID).toEqual({ 'Fn::If': ['UseCustomKMS', { 'Ref': 'KMSKeyArn' }, { 'Ref': 'AWS::NoValue' }] });
        });
        test('should have ApplicationDataBucket with security best practices', () => {
            const bucket = template.Resources.ApplicationDataBucket;
            // Public access blocking
            expect(bucket.Properties.PublicAccessBlockConfiguration).toEqual({
                BlockPublicAcls: true,
                BlockPublicPolicy: true,
                IgnorePublicAcls: true,
                RestrictPublicBuckets: true
            });
            // Versioning
            expect(bucket.Properties.VersioningConfiguration.Status).toBe('Enabled');
            // Lifecycle policies
            expect(bucket.Properties.LifecycleConfiguration.Rules).toHaveLength(1);
            expect(bucket.Properties.LifecycleConfiguration.Rules[0].NoncurrentVersionExpirationInDays).toBe(90);
        });
        test('should have ApplicationDataBucketPolicy enforcing encryption', () => {
            expect(template.Resources.ApplicationDataBucketPolicy).toBeDefined();
            const policy = template.Resources.ApplicationDataBucketPolicy;
            expect(policy.Type).toBe('AWS::S3::BucketPolicy');
            expect(policy.Properties.Bucket).toEqual({ 'Ref': 'ApplicationDataBucket' });
            const statements = policy.Properties.PolicyDocument.Statement;
            expect(statements).toHaveLength(2);
            // Deny insecure connections
            const httpsStatement = statements.find((s) => s.Sid === 'DenyInsecureConnections');
            expect(httpsStatement.Effect).toBe('Deny');
            expect(httpsStatement.Condition.Bool['aws:SecureTransport']).toBe('false');
            // Deny unencrypted uploads
            const encryptionStatement = statements.find((s) => s.Sid === 'DenyUnencryptedObjectUploads');
            expect(encryptionStatement.Effect).toBe('Deny');
            expect(encryptionStatement.Action).toBe('s3:PutObject');
        });
        test('should have LoggingBucket with AES256 encryption', () => {
            expect(template.Resources.LoggingBucket).toBeDefined();
            const bucket = template.Resources.LoggingBucket;
            expect(bucket.Type).toBe('AWS::S3::Bucket');
            expect(bucket.Properties.BucketName).toEqual({ 'Fn::Sub': 'saas-logs-${AWS::AccountId}-${Environment}' });
            const encryption = bucket.Properties.BucketEncryption.ServerSideEncryptionConfiguration[0];
            expect(encryption.ServerSideEncryptionByDefault.SSEAlgorithm).toBe('AES256');
        });
        test('should have LoggingBucketPolicy for S3 server access logging', () => {
            expect(template.Resources.LoggingBucketPolicy).toBeDefined();
            const policy = template.Resources.LoggingBucketPolicy;
            expect(policy.Type).toBe('AWS::S3::BucketPolicy');
            expect(policy.Properties.PolicyDocument.Version).toBe('2012-10-17');
            const statement = policy.Properties.PolicyDocument.Statement[0];
            expect(statement.Principal.Service).toBe('logging.s3.amazonaws.com');
            expect(statement.Action).toEqual(['s3:PutObject']);
            expect(statement.Condition.StringEquals['aws:SourceAccount']).toEqual({ 'Ref': 'AWS::AccountId' });
        });
    });
    describe('EBS Encryption Lambda Function', () => {
        test('should have EBSEncryptionLambdaRole with proper permissions', () => {
            expect(template.Resources.EBSEncryptionLambdaRole).toBeDefined();
            const role = template.Resources.EBSEncryptionLambdaRole;
            expect(role.Type).toBe('AWS::IAM::Role');
            expect(role.Properties.ManagedPolicyArns).toContain('arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole');
            const policy = role.Properties.Policies[0];
            expect(policy.PolicyName).toBe('EnableEBSEncryption');
            expect(policy.PolicyDocument.Statement[0].Action).toEqual([
                'ec2:EnableEbsEncryptionByDefault',
                'ec2:GetEbsEncryptionByDefault',
                'ec2:ModifyEbsDefaultKmsKeyId'
            ]);
        });
        test('should have EBSEncryptionLambda function', () => {
            expect(template.Resources.EBSEncryptionLambda).toBeDefined();
            const lambda = template.Resources.EBSEncryptionLambda;
            expect(lambda.Type).toBe('AWS::Lambda::Function');
            expect(lambda.Properties.Runtime).toBe('python3.9');
            expect(lambda.Properties.Handler).toBe('index.handler');
            expect(lambda.Properties.FunctionName).toEqual({ 'Fn::Sub': 'EnableEBSEncryption-${Environment}' });
            expect(lambda.Properties.Timeout).toBe(60);
        });
        test('should have EnableEBSEncryption custom resource', () => {
            expect(template.Resources.EnableEBSEncryption).toBeDefined();
            const resource = template.Resources.EnableEBSEncryption;
            expect(resource.Type).toBe('Custom::EnableEBSEncryption');
            expect(resource.Properties.ServiceToken).toEqual({ 'Fn::GetAtt': ['EBSEncryptionLambda', 'Arn'] });
            expect(resource.Properties.KmsKeyId).toEqual({ 'Fn::If': ['UseCustomKMS', { 'Ref': 'KMSKeyArn' }, { 'Ref': 'AWS::NoValue' }] });
        });
    });
    describe('IAM MFA Enforcement Policy', () => {
        test('should have MFAEnforcementPolicy with comprehensive rules', () => {
            expect(template.Resources.MFAEnforcementPolicy).toBeDefined();
            const policy = template.Resources.MFAEnforcementPolicy;
            expect(policy.Type).toBe('AWS::IAM::ManagedPolicy');
            expect(policy.Properties.ManagedPolicyName).toEqual({ 'Fn::Sub': 'RequireMFA-${Environment}' });
            expect(policy.Properties.Description).toBe('Enforces MFA for all IAM users');
        });
        test('should have MFA policy statements covering all required scenarios', () => {
            const policy = template.Resources.MFAEnforcementPolicy;
            const statements = policy.Properties.PolicyDocument.Statement;
            expect(statements).toHaveLength(4);
            // Check view account info statement
            const viewStatement = statements.find((s) => s.Sid === 'AllowViewAccountInfo');
            expect(viewStatement.Effect).toBe('Allow');
            expect(viewStatement.Action).toContain('iam:GetAccountPasswordPolicy');
            // Check manage own MFA statement
            const manageStatement = statements.find((s) => s.Sid === 'AllowManageOwnPasswordsAndMFA');
            expect(manageStatement.Effect).toBe('Allow');
            expect(manageStatement.Action).toContain('iam:EnableMFADevice');
            // Check deny without MFA statement
            const denyStatement = statements.find((s) => s.Sid === 'DenyAllExceptListedIfNoMFA');
            expect(denyStatement.Effect).toBe('Deny');
            expect(denyStatement.Condition.BoolIfExists['aws:MultiFactorAuthPresent']).toBe('false');
            // Check deny if MFA too old statement
            const ageStatement = statements.find((s) => s.Sid === 'DenyIfMFATooOld');
            expect(ageStatement.Effect).toBe('Deny');
            expect(ageStatement.Condition.NumericGreaterThan['aws:MultiFactorAuthAge']).toEqual({ 'Ref': 'MFAAge' });
        });
    });
    describe('AWS Config Resources', () => {
        test('should have ConfigRecorder with proper configuration', () => {
            expect(template.Resources.ConfigRecorder).toBeDefined();
            const recorder = template.Resources.ConfigRecorder;
            expect(recorder.Type).toBe('AWS::Config::ConfigurationRecorder');
            expect(recorder.Properties.Name).toEqual({ 'Fn::Sub': 'EncryptionComplianceRecorder-${Environment}' });
            expect(recorder.Properties.RoleARN).toEqual({ 'Fn::GetAtt': ['ConfigRole', 'Arn'] });
            expect(recorder.Properties.RecordingGroup.AllSupported).toBe(true);
            expect(recorder.Properties.RecordingGroup.IncludeGlobalResourceTypes).toBe(true);
        });
        test('should have ConfigDeliveryChannel', () => {
            expect(template.Resources.ConfigDeliveryChannel).toBeDefined();
            const channel = template.Resources.ConfigDeliveryChannel;
            expect(channel.Type).toBe('AWS::Config::DeliveryChannel');
            expect(channel.Properties.S3BucketName).toEqual({ 'Ref': 'ConfigBucket' });
            expect(channel.Properties.SnsTopicARN).toEqual({ 'Ref': 'ConfigSNSTopic' });
            expect(channel.Properties.ConfigSnapshotDeliveryProperties.DeliveryFrequency).toBe('TwentyFour_Hours');
        });
        test('should have ConfigBucket with encryption and lifecycle', () => {
            expect(template.Resources.ConfigBucket).toBeDefined();
            const bucket = template.Resources.ConfigBucket;
            expect(bucket.Type).toBe('AWS::S3::Bucket');
            expect(bucket.Properties.BucketName).toEqual({ 'Fn::Sub': 'config-bucket-${AWS::AccountId}-${Environment}' });
            // Check encryption
            expect(bucket.Properties.BucketEncryption.ServerSideEncryptionConfiguration[0].ServerSideEncryptionByDefault.SSEAlgorithm).toBe('AES256');
            // Check lifecycle - 7 years retention
            expect(bucket.Properties.LifecycleConfiguration.Rules[0].ExpirationInDays).toBe(2555);
        });
        test('should have ConfigRole with comprehensive permissions', () => {
            expect(template.Resources.ConfigRole).toBeDefined();
            const role = template.Resources.ConfigRole;
            expect(role.Type).toBe('AWS::IAM::Role');
            expect(role.Properties.AssumeRolePolicyDocument.Statement[0].Principal.Service).toBe('config.amazonaws.com');
            const policy = role.Properties.Policies[0];
            expect(policy.PolicyName).toBe('ConfigServiceRolePolicy');
            expect(policy.PolicyDocument.Statement[0].Action).toContain('config:Put*');
            expect(policy.PolicyDocument.Statement[0].Action).toContain('s3:PutObject');
        });
    });
    describe('AWS Config Rules for Compliance', () => {
        const configRules = [
            'S3BucketSSLRequestsOnly',
            'S3BucketServerSideEncryption',
            'S3DefaultEncryptionKMS',
            'EncryptedVolumes',
            'EC2EBSEncryptionByDefault',
            'RDSStorageEncrypted',
            'EFSEncryptedCheck',
            'IAMUserMFAEnabled',
            'RootAccountMFAEnabled'
        ];
        configRules.forEach(ruleName => {
            test(`should have ${ruleName} Config rule`, () => {
                expect(template.Resources[ruleName]).toBeDefined();
                const rule = template.Resources[ruleName];
                expect(rule.Type).toBe('AWS::Config::ConfigRule');
                expect(rule.DependsOn).toBe('ConfigRecorder');
                expect(rule.Properties.Source.Owner).toBe('AWS');
                expect(rule.Properties.Description).toBeDefined();
            });
        });
        test('should have S3BucketSSLRequestsOnly with correct source identifier', () => {
            const rule = template.Resources.S3BucketSSLRequestsOnly;
            expect(rule.Properties.Source.SourceIdentifier).toBe('S3_BUCKET_SSL_REQUESTS_ONLY');
        });
        test('should have EC2EBSEncryptionByDefault with correct source identifier', () => {
            const rule = template.Resources.EC2EBSEncryptionByDefault;
            expect(rule.Properties.Source.SourceIdentifier).toBe('EC2_EBS_ENCRYPTION_BY_DEFAULT');
        });
        test('should have IAMUserMFAEnabled with correct source identifier', () => {
            const rule = template.Resources.IAMUserMFAEnabled;
            expect(rule.Properties.Source.SourceIdentifier).toBe('IAM_USER_MFA_ENABLED');
        });
    });
    describe('Conformance Pack', () => {
        test('should have EncryptionConformancePack', () => {
            expect(template.Resources.EncryptionConformancePack).toBeDefined();
            const pack = template.Resources.EncryptionConformancePack;
            expect(pack.Type).toBe('AWS::Config::ConformancePack');
            expect(pack.DependsOn).toEqual(['ConfigRecorder', 'ConfigDeliveryChannel']);
            expect(pack.Properties.ConformancePackName).toEqual({ 'Fn::Sub': 'encryption-compliance-pack-${Environment}' });
            expect(pack.Properties.TemplateBody).toBeDefined();
        });
    });
    describe('Outputs Validation', () => {
        test('should have all required outputs', () => {
            const expectedOutputs = [
                'ApplicationDataBucketName',
                'LoggingBucketName',
                'KMSKeyId',
                'MFAPolicyArn',
                'ConfigRecorderName',
                'ComplianceStatus'
            ];
            expectedOutputs.forEach(outputName => {
                expect(template.Outputs[outputName]).toBeDefined();
            });
        });
        test('should have ApplicationDataBucketName output with export', () => {
            const output = template.Outputs.ApplicationDataBucketName;
            expect(output.Description).toBe('Name of the encrypted application data bucket');
            expect(output.Value).toEqual({ 'Ref': 'ApplicationDataBucket' });
            expect(output.Export.Name).toEqual({ 'Fn::Sub': '${AWS::StackName}-AppBucket' });
        });
        test('should have KMSKeyId output with conditional value', () => {
            const output = template.Outputs.KMSKeyId;
            expect(output.Description).toBe('KMS Key ID for encryption');
            expect(output.Value).toEqual({ 'Fn::If': ['UseCustomKMS', { 'Ref': 'KMSKeyArn' }, { 'Ref': 'EncryptionKey' }] });
        });
        test('should have ComplianceStatus output with Config console URL', () => {
            const output = template.Outputs.ComplianceStatus;
            expect(output.Description).toBe('Check Config Rules dashboard for compliance status');
            expect(output.Value).toEqual({ 'Fn::Sub': 'https://console.aws.amazon.com/config/home?region=${AWS::Region}#/rules' });
        });
    });
    describe('Resource Count and Structure Validation', () => {
        test('should have correct number of resources', () => {
            const resourceCount = Object.keys(template.Resources).length;
            expect(resourceCount).toBe(26); // All encryption, MFA, and Config resources
        });
        test('should have correct number of parameters', () => {
            const parameterCount = Object.keys(template.Parameters).length;
            expect(parameterCount).toBe(3); // Environment, MFAAge, KMSKeyArn
        });
        test('should have correct number of conditions', () => {
            const conditionCount = Object.keys(template.Conditions).length;
            expect(conditionCount).toBe(2); // UseCustomKMS, UseDefaultKMS
        });
        test('should have correct number of outputs', () => {
            const outputCount = Object.keys(template.Outputs).length;
            expect(outputCount).toBe(6);
        });
    });
    describe('Security and Compliance Validation', () => {
        test('all S3 buckets should have encryption configured', () => {
            const s3Buckets = ['ApplicationDataBucket', 'LoggingBucket', 'ConfigBucket'];
            s3Buckets.forEach(bucketName => {
                const bucket = template.Resources[bucketName];
                expect(bucket.Properties.BucketEncryption).toBeDefined();
                expect(bucket.Properties.BucketEncryption.ServerSideEncryptionConfiguration).toBeDefined();
            });
        });
        test('all S3 buckets should block public access', () => {
            const s3Buckets = ['ApplicationDataBucket', 'LoggingBucket', 'ConfigBucket'];
            s3Buckets.forEach(bucketName => {
                const bucket = template.Resources[bucketName];
                const publicAccess = bucket.Properties.PublicAccessBlockConfiguration;
                expect(publicAccess.BlockPublicAcls).toBe(true);
                expect(publicAccess.BlockPublicPolicy).toBe(true);
                expect(publicAccess.IgnorePublicAcls).toBe(true);
                expect(publicAccess.RestrictPublicBuckets).toBe(true);
            });
        });
        test('KMS key should have key rotation enabled', () => {
            const key = template.Resources.EncryptionKey;
            expect(key.Properties.EnableKeyRotation).toBe(true);
        });
        test('Config SNS topic should be encrypted', () => {
            const topic = template.Resources.ConfigSNSTopic;
            expect(topic.Properties.KmsMasterKeyId).toEqual({ 'Fn::If': ['UseCustomKMS', { 'Ref': 'KMSKeyArn' }, { 'Ref': 'EncryptionKey' }] });
        });
    });
    describe('Template Naming Conventions', () => {
        test('all resources should follow consistent naming patterns', () => {
            const resourcesWithEnvironmentNaming = [
                'EBSEncryptionLambda',
                'MFAEnforcementPolicy',
                'ConfigRecorder',
                'ConfigDeliveryChannel',
                'EncryptionConformancePack'
            ];
            resourcesWithEnvironmentNaming.forEach(resourceName => {
                const resource = template.Resources[resourceName];
                const nameProperty = resource.Properties.FunctionName ||
                    resource.Properties.ManagedPolicyName ||
                    resource.Properties.Name ||
                    resource.Properties.ConformancePackName;
                expect(nameProperty).toBeDefined();
                expect(JSON.stringify(nameProperty)).toContain('${Environment}');
            });
        });
        test('all bucket names should include AccountId and Environment', () => {
            const bucketResources = ['ApplicationDataBucket', 'LoggingBucket', 'ConfigBucket'];
            bucketResources.forEach(bucketName => {
                const bucket = template.Resources[bucketName];
                const bucketNameSub = bucket.Properties.BucketName;
                expect(bucketNameSub['Fn::Sub']).toContain('${AWS::AccountId}');
                expect(bucketNameSub['Fn::Sub']).toContain('${Environment}');
            });
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFwLXN0YWNrLnVuaXQudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3N1YmNhdGVnb3J5LXJlZmVyZW5jZXMvc2VjdXJpdHktY29uZmlndXJhdGlvbi1hcy1jb2RlL1ByMzA5My90ZXN0L3RhcC1zdGFjay51bml0LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw0Q0FBb0I7QUFDcEIsZ0RBQXdCO0FBRXhCLE1BQU0saUJBQWlCLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsSUFBSSxLQUFLLENBQUM7QUFFbEUsUUFBUSxDQUFDLDhEQUE4RCxFQUFFLEdBQUcsRUFBRTtJQUM1RSxJQUFJLFFBQWEsQ0FBQztJQUVsQixTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsTUFBTSxZQUFZLEdBQUcsY0FBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztRQUNsRSxNQUFNLGVBQWUsR0FBRyxZQUFFLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQztRQUM5RCxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7UUFDL0MsSUFBSSxDQUFDLGlEQUFpRCxFQUFFLEdBQUcsRUFBRTtZQUMzRCxNQUFNLENBQUMsUUFBUSxDQUFDLHdCQUF3QixDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQy9ELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDhDQUE4QyxFQUFFLEdBQUcsRUFBRTtZQUN4RCxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLHdGQUF3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LENBQUMsQ0FBQztZQUMvRCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuY29uc3QgZW52aXJvbm1lbnRTdWZmaXggPSBwcm9jZXNzLmVudi5FTlZJUk9OTUVOVF9TVUZGSVggfHwgJ2Rldic7XG5cbmRlc2NyaWJlKCdUYXBTdGFjayBDbG91ZEZvcm1hdGlvbiBUZW1wbGF0ZSAtIFNhYVMgRW5jcnlwdGlvbiBTdGFuZGFyZHMnLCAoKSA9PiB7XG4gIGxldCB0ZW1wbGF0ZTogYW55O1xuXG4gIGJlZm9yZUFsbCgoKSA9PiB7XG4gICAgY29uc3QgdGVtcGxhdGVQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL2xpYi9UYXBTdGFjay5qc29uJyk7XG4gICAgY29uc3QgdGVtcGxhdGVDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKHRlbXBsYXRlUGF0aCwgJ3V0ZjgnKTtcbiAgICB0ZW1wbGF0ZSA9IEpTT04ucGFyc2UodGVtcGxhdGVDb250ZW50KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1RlbXBsYXRlIFN0cnVjdHVyZSBhbmQgTWV0YWRhdGEnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgdmFsaWQgQ2xvdWRGb3JtYXRpb24gZm9ybWF0IHZlcnNpb24nLCAoKSA9PiB7XG4gICAgICBleHBlY3QodGVtcGxhdGUuQVdTVGVtcGxhdGVGb3JtYXRWZXJzaW9uKS50b0JlKCcyMDEwLTA5LTA5Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBlbmNyeXB0aW9uIHN0YW5kYXJkcyBkZXNjcmlwdGlvbicsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5EZXNjcmlwdGlvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5EZXNjcmlwdGlvbikudG9CZSgnU2FhUyBFbmNyeXB0aW9uIFN0YW5kYXJkcyBFbmZvcmNlbWVudCBUZW1wbGF0ZSAtIENvbXBsaWFudCB3aXRoIGNmbi1uYWcgYW5kIEFXUyBDb25maWcnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIENsb3VkRm9ybWF0aW9uIEludGVyZmFjZSBtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5NZXRhZGF0YSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5NZXRhZGF0YVsnQVdTOjpDbG91ZEZvcm1hdGlvbjo6SW50ZXJmYWNlJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodGVtcGxhdGUuTWV0YWRhdGFbJ0FXUzo6Q2xvdWRGb3JtYXRpb246OkludGVyZmFjZSddLlBhcmFtZXRlckdyb3VwcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5NZXRhZGF0YVsnQVdTOjpDbG91ZEZvcm1hdGlvbjo6SW50ZXJmYWNlJ10uUGFyYW1ldGVyTGFiZWxzKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGFyYW1ldGVycyBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIEVudmlyb25tZW50IHBhcmFtZXRlciB3aXRoIGNvcnJlY3QgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5QYXJhbWV0ZXJzLkVudmlyb25tZW50KS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgZW52UGFyYW0gPSB0ZW1wbGF0ZS5QYXJhbWV0ZXJzLkVudmlyb25tZW50O1xuICAgICAgXG4gICAgICBleHBlY3QoZW52UGFyYW0uVHlwZSkudG9CZSgnU3RyaW5nJyk7XG4gICAgICBleHBlY3QoZW52UGFyYW0uRGVmYXVsdCkudG9CZSgncHJvZHVjdGlvbicpO1xuICAgICAgZXhwZWN0KGVudlBhcmFtLkFsbG93ZWRWYWx1ZXMpLnRvRXF1YWwoWydkZXZlbG9wbWVudCcsICdzdGFnaW5nJywgJ3Byb2R1Y3Rpb24nXSk7XG4gICAgICBleHBlY3QoZW52UGFyYW0uRGVzY3JpcHRpb24pLnRvQmUoJ0Vudmlyb25tZW50IG5hbWUgZm9yIHJlc291cmNlIHRhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIE1GQUFnZSBwYXJhbWV0ZXIgZm9yIG11bHRpLWZhY3RvciBhdXRoZW50aWNhdGlvbicsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5QYXJhbWV0ZXJzLk1GQUFnZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IG1mYVBhcmFtID0gdGVtcGxhdGUuUGFyYW1ldGVycy5NRkFBZ2U7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZmFQYXJhbS5UeXBlKS50b0JlKCdOdW1iZXInKTtcbiAgICAgIGV4cGVjdChtZmFQYXJhbS5EZWZhdWx0KS50b0JlKDM2MDApO1xuICAgICAgZXhwZWN0KG1mYVBhcmFtLkRlc2NyaXB0aW9uKS50b0JlKCdNYXhpbXVtIGFnZSBpbiBzZWNvbmRzIGZvciBNRkEgYXV0aGVudGljYXRpb24gKGRlZmF1bHQgMSBob3VyKScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgS01TS2V5QXJuIHBhcmFtZXRlciBmb3IgY3VzdG9tIGVuY3J5cHRpb24ga2V5JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlBhcmFtZXRlcnMuS01TS2V5QXJuKS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3Qga21zUGFyYW0gPSB0ZW1wbGF0ZS5QYXJhbWV0ZXJzLktNU0tleUFybjtcbiAgICAgIFxuICAgICAgZXhwZWN0KGttc1BhcmFtLlR5cGUpLnRvQmUoJ1N0cmluZycpO1xuICAgICAgZXhwZWN0KGttc1BhcmFtLkRlZmF1bHQpLnRvQmUoJycpO1xuICAgICAgZXhwZWN0KGttc1BhcmFtLkRlc2NyaXB0aW9uKS50b0JlKCdPcHRpb25hbCBLTVMga2V5IEFSTiBmb3IgUzMgZW5jcnlwdGlvbiAobGVhdmUgZW1wdHkgZm9yIEFXUyBtYW5hZ2VkIGtleSknKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbmRpdGlvbnMgZm9yIEtNUyBLZXkgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBVc2VDdXN0b21LTVMgY29uZGl0aW9uJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLkNvbmRpdGlvbnMuVXNlQ3VzdG9tS01TKS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgY29uZGl0aW9uID0gdGVtcGxhdGUuQ29uZGl0aW9ucy5Vc2VDdXN0b21LTVM7XG4gICAgICBcbiAgICAgIGV4cGVjdChjb25kaXRpb25bJ0ZuOjpOb3QnXSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjb25kaXRpb25bJ0ZuOjpOb3QnXVswXVsnRm46OkVxdWFscyddKS50b0VxdWFsKFt7ICdSZWYnOiAnS01TS2V5QXJuJyB9LCAnJ10pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgVXNlRGVmYXVsdEtNUyBjb25kaXRpb24nLCAoKSA9PiB7XG4gICAgICBleHBlY3QodGVtcGxhdGUuQ29uZGl0aW9ucy5Vc2VEZWZhdWx0S01TKS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgY29uZGl0aW9uID0gdGVtcGxhdGUuQ29uZGl0aW9ucy5Vc2VEZWZhdWx0S01TO1xuICAgICAgXG4gICAgICBleHBlY3QoY29uZGl0aW9uWydGbjo6RXF1YWxzJ10pLnRvRXF1YWwoW3sgJ1JlZic6ICdLTVNLZXlBcm4nIH0sICcnXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdLTVMgRW5jcnlwdGlvbiBSZXNvdXJjZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgRW5jcnlwdGlvbktleSB3aXRoIHByb3BlciBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5FbmNyeXB0aW9uS2V5KS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3Qga2V5ID0gdGVtcGxhdGUuUmVzb3VyY2VzLkVuY3J5cHRpb25LZXk7XG4gICAgICBcbiAgICAgIGV4cGVjdChrZXkuVHlwZSkudG9CZSgnQVdTOjpLTVM6OktleScpO1xuICAgICAgZXhwZWN0KGtleS5Db25kaXRpb24pLnRvQmUoJ1VzZURlZmF1bHRLTVMnKTtcbiAgICAgIGV4cGVjdChrZXkuUHJvcGVydGllcy5EZXNjcmlwdGlvbikudG9CZSgnTWFzdGVyIGtleSBmb3IgZW5jcnlwdGlvbiBjb21wbGlhbmNlJyk7XG4gICAgICBleHBlY3Qoa2V5LlByb3BlcnRpZXMuRW5hYmxlS2V5Um90YXRpb24pLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBFbmNyeXB0aW9uS2V5IHdpdGggY29tcHJlaGVuc2l2ZSBrZXkgcG9saWN5JywgKCkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gdGVtcGxhdGUuUmVzb3VyY2VzLkVuY3J5cHRpb25LZXk7XG4gICAgICBjb25zdCBrZXlQb2xpY3kgPSBrZXkuUHJvcGVydGllcy5LZXlQb2xpY3k7XG4gICAgICBcbiAgICAgIGV4cGVjdChrZXlQb2xpY3kuVmVyc2lvbikudG9CZSgnMjAxMi0xMC0xNycpO1xuICAgICAgZXhwZWN0KGtleVBvbGljeS5TdGF0ZW1lbnQpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgcm9vdCBwZXJtaXNzaW9ucyBzdGF0ZW1lbnRcbiAgICAgIGNvbnN0IHJvb3RTdGF0ZW1lbnQgPSBrZXlQb2xpY3kuU3RhdGVtZW50LmZpbmQoKHM6IGFueSkgPT4gcy5TaWQgPT09ICdFbmFibGUgSUFNIFVzZXIgUGVybWlzc2lvbnMnKTtcbiAgICAgIGV4cGVjdChyb290U3RhdGVtZW50KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJvb3RTdGF0ZW1lbnQuRWZmZWN0KS50b0JlKCdBbGxvdycpO1xuICAgICAgZXhwZWN0KHJvb3RTdGF0ZW1lbnQuQWN0aW9uKS50b0JlKCdrbXM6KicpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBzZXJ2aWNlIHBlcm1pc3Npb25zIHN0YXRlbWVudFxuICAgICAgY29uc3Qgc2VydmljZVN0YXRlbWVudCA9IGtleVBvbGljeS5TdGF0ZW1lbnQuZmluZCgoczogYW55KSA9PiBzLlNpZCA9PT0gJ0FsbG93IHVzZSBvZiB0aGUga2V5IGZvciBlbmNyeXB0aW9uJyk7XG4gICAgICBleHBlY3Qoc2VydmljZVN0YXRlbWVudCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzZXJ2aWNlU3RhdGVtZW50LlByaW5jaXBhbC5TZXJ2aWNlKS50b0VxdWFsKFsnczMuYW1hem9uYXdzLmNvbScsICdlYzIuYW1hem9uYXdzLmNvbScsICdjb25maWcuYW1hem9uYXdzLmNvbSddKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIEVuY3J5cHRpb25LZXlBbGlhcyB3aXRoIGNvcnJlY3QgbmFtaW5nJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5FbmNyeXB0aW9uS2V5QWxpYXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBhbGlhcyA9IHRlbXBsYXRlLlJlc291cmNlcy5FbmNyeXB0aW9uS2V5QWxpYXM7XG4gICAgICBcbiAgICAgIGV4cGVjdChhbGlhcy5UeXBlKS50b0JlKCdBV1M6OktNUzo6QWxpYXMnKTtcbiAgICAgIGV4cGVjdChhbGlhcy5Db25kaXRpb24pLnRvQmUoJ1VzZURlZmF1bHRLTVMnKTtcbiAgICAgIGV4cGVjdChhbGlhcy5Qcm9wZXJ0aWVzLkFsaWFzTmFtZSkudG9FcXVhbCh7ICdGbjo6U3ViJzogJ2FsaWFzL2VuY3J5cHRpb24tY29tcGxpYW5jZS0ke0Vudmlyb25tZW50fScgfSk7XG4gICAgICBleHBlY3QoYWxpYXMuUHJvcGVydGllcy5UYXJnZXRLZXlJZCkudG9FcXVhbCh7ICdSZWYnOiAnRW5jcnlwdGlvbktleScgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTMyBCdWNrZXRzIGFuZCBFbmNyeXB0aW9uIFBvbGljaWVzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIEFwcGxpY2F0aW9uRGF0YUJ1Y2tldCB3aXRoIG1hbmRhdG9yeSBlbmNyeXB0aW9uJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5BcHBsaWNhdGlvbkRhdGFCdWNrZXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBidWNrZXQgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuQXBwbGljYXRpb25EYXRhQnVja2V0O1xuICAgICAgXG4gICAgICBleHBlY3QoYnVja2V0LlR5cGUpLnRvQmUoJ0FXUzo6UzM6OkJ1Y2tldCcpO1xuICAgICAgZXhwZWN0KGJ1Y2tldC5Qcm9wZXJ0aWVzLkJ1Y2tldE5hbWUpLnRvRXF1YWwoeyAnRm46OlN1Yic6ICdzYWFzLWFwcC1kYXRhLSR7QVdTOjpBY2NvdW50SWR9LSR7RW52aXJvbm1lbnR9JyB9KTtcbiAgICAgIGV4cGVjdChidWNrZXQuUHJvcGVydGllcy5CdWNrZXRFbmNyeXB0aW9uLlNlcnZlclNpZGVFbmNyeXB0aW9uQ29uZmlndXJhdGlvbikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIEFwcGxpY2F0aW9uRGF0YUJ1Y2tldCB3aXRoIGNvbmRpdGlvbmFsIEtNUyBlbmNyeXB0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgYnVja2V0ID0gdGVtcGxhdGUuUmVzb3VyY2VzLkFwcGxpY2F0aW9uRGF0YUJ1Y2tldDtcbiAgICAgIGNvbnN0IGVuY3J5cHRpb24gPSBidWNrZXQuUHJvcGVydGllcy5CdWNrZXRFbmNyeXB0aW9uLlNlcnZlclNpZGVFbmNyeXB0aW9uQ29uZmlndXJhdGlvblswXS5TZXJ2ZXJTaWRlRW5jcnlwdGlvbkJ5RGVmYXVsdDtcbiAgICAgIFxuICAgICAgZXhwZWN0KGVuY3J5cHRpb24uU1NFQWxnb3JpdGhtKS50b0VxdWFsKHsgJ0ZuOjpJZic6IFsnVXNlQ3VzdG9tS01TJywgJ2F3czprbXMnLCAnQUVTMjU2J10gfSk7XG4gICAgICBleHBlY3QoZW5jcnlwdGlvbi5LTVNNYXN0ZXJLZXlJRCkudG9FcXVhbCh7ICdGbjo6SWYnOiBbJ1VzZUN1c3RvbUtNUycsIHsgJ1JlZic6ICdLTVNLZXlBcm4nIH0sIHsgJ1JlZic6ICdBV1M6Ok5vVmFsdWUnIH1dIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgQXBwbGljYXRpb25EYXRhQnVja2V0IHdpdGggc2VjdXJpdHkgYmVzdCBwcmFjdGljZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBidWNrZXQgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuQXBwbGljYXRpb25EYXRhQnVja2V0O1xuICAgICAgXG4gICAgICAvLyBQdWJsaWMgYWNjZXNzIGJsb2NraW5nXG4gICAgICBleHBlY3QoYnVja2V0LlByb3BlcnRpZXMuUHVibGljQWNjZXNzQmxvY2tDb25maWd1cmF0aW9uKS50b0VxdWFsKHtcbiAgICAgICAgQmxvY2tQdWJsaWNBY2xzOiB0cnVlLFxuICAgICAgICBCbG9ja1B1YmxpY1BvbGljeTogdHJ1ZSxcbiAgICAgICAgSWdub3JlUHVibGljQWNsczogdHJ1ZSxcbiAgICAgICAgUmVzdHJpY3RQdWJsaWNCdWNrZXRzOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gVmVyc2lvbmluZ1xuICAgICAgZXhwZWN0KGJ1Y2tldC5Qcm9wZXJ0aWVzLlZlcnNpb25pbmdDb25maWd1cmF0aW9uLlN0YXR1cykudG9CZSgnRW5hYmxlZCcpO1xuICAgICAgXG4gICAgICAvLyBMaWZlY3ljbGUgcG9saWNpZXNcbiAgICAgIGV4cGVjdChidWNrZXQuUHJvcGVydGllcy5MaWZlY3ljbGVDb25maWd1cmF0aW9uLlJ1bGVzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoYnVja2V0LlByb3BlcnRpZXMuTGlmZWN5Y2xlQ29uZmlndXJhdGlvbi5SdWxlc1swXS5Ob25jdXJyZW50VmVyc2lvbkV4cGlyYXRpb25JbkRheXMpLnRvQmUoOTApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgQXBwbGljYXRpb25EYXRhQnVja2V0UG9saWN5IGVuZm9yY2luZyBlbmNyeXB0aW9uJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5BcHBsaWNhdGlvbkRhdGFCdWNrZXRQb2xpY3kpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBwb2xpY3kgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuQXBwbGljYXRpb25EYXRhQnVja2V0UG9saWN5O1xuICAgICAgXG4gICAgICBleHBlY3QocG9saWN5LlR5cGUpLnRvQmUoJ0FXUzo6UzM6OkJ1Y2tldFBvbGljeScpO1xuICAgICAgZXhwZWN0KHBvbGljeS5Qcm9wZXJ0aWVzLkJ1Y2tldCkudG9FcXVhbCh7ICdSZWYnOiAnQXBwbGljYXRpb25EYXRhQnVja2V0JyB9KTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhdGVtZW50cyA9IHBvbGljeS5Qcm9wZXJ0aWVzLlBvbGljeURvY3VtZW50LlN0YXRlbWVudDtcbiAgICAgIGV4cGVjdChzdGF0ZW1lbnRzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBcbiAgICAgIC8vIERlbnkgaW5zZWN1cmUgY29ubmVjdGlvbnNcbiAgICAgIGNvbnN0IGh0dHBzU3RhdGVtZW50ID0gc3RhdGVtZW50cy5maW5kKChzOiBhbnkpID0+IHMuU2lkID09PSAnRGVueUluc2VjdXJlQ29ubmVjdGlvbnMnKTtcbiAgICAgIGV4cGVjdChodHRwc1N0YXRlbWVudC5FZmZlY3QpLnRvQmUoJ0RlbnknKTtcbiAgICAgIGV4cGVjdChodHRwc1N0YXRlbWVudC5Db25kaXRpb24uQm9vbFsnYXdzOlNlY3VyZVRyYW5zcG9ydCddKS50b0JlKCdmYWxzZScpO1xuICAgICAgXG4gICAgICAvLyBEZW55IHVuZW5jcnlwdGVkIHVwbG9hZHNcbiAgICAgIGNvbnN0IGVuY3J5cHRpb25TdGF0ZW1lbnQgPSBzdGF0ZW1lbnRzLmZpbmQoKHM6IGFueSkgPT4gcy5TaWQgPT09ICdEZW55VW5lbmNyeXB0ZWRPYmplY3RVcGxvYWRzJyk7XG4gICAgICBleHBlY3QoZW5jcnlwdGlvblN0YXRlbWVudC5FZmZlY3QpLnRvQmUoJ0RlbnknKTtcbiAgICAgIGV4cGVjdChlbmNyeXB0aW9uU3RhdGVtZW50LkFjdGlvbikudG9CZSgnczM6UHV0T2JqZWN0Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBMb2dnaW5nQnVja2V0IHdpdGggQUVTMjU2IGVuY3J5cHRpb24nLCAoKSA9PiB7XG4gICAgICBleHBlY3QodGVtcGxhdGUuUmVzb3VyY2VzLkxvZ2dpbmdCdWNrZXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBidWNrZXQgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuTG9nZ2luZ0J1Y2tldDtcbiAgICAgIFxuICAgICAgZXhwZWN0KGJ1Y2tldC5UeXBlKS50b0JlKCdBV1M6OlMzOjpCdWNrZXQnKTtcbiAgICAgIGV4cGVjdChidWNrZXQuUHJvcGVydGllcy5CdWNrZXROYW1lKS50b0VxdWFsKHsgJ0ZuOjpTdWInOiAnc2Fhcy1sb2dzLSR7QVdTOjpBY2NvdW50SWR9LSR7RW52aXJvbm1lbnR9JyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgZW5jcnlwdGlvbiA9IGJ1Y2tldC5Qcm9wZXJ0aWVzLkJ1Y2tldEVuY3J5cHRpb24uU2VydmVyU2lkZUVuY3J5cHRpb25Db25maWd1cmF0aW9uWzBdO1xuICAgICAgZXhwZWN0KGVuY3J5cHRpb24uU2VydmVyU2lkZUVuY3J5cHRpb25CeURlZmF1bHQuU1NFQWxnb3JpdGhtKS50b0JlKCdBRVMyNTYnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIExvZ2dpbmdCdWNrZXRQb2xpY3kgZm9yIFMzIHNlcnZlciBhY2Nlc3MgbG9nZ2luZycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5SZXNvdXJjZXMuTG9nZ2luZ0J1Y2tldFBvbGljeSkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IHBvbGljeSA9IHRlbXBsYXRlLlJlc291cmNlcy5Mb2dnaW5nQnVja2V0UG9saWN5O1xuICAgICAgXG4gICAgICBleHBlY3QocG9saWN5LlR5cGUpLnRvQmUoJ0FXUzo6UzM6OkJ1Y2tldFBvbGljeScpO1xuICAgICAgZXhwZWN0KHBvbGljeS5Qcm9wZXJ0aWVzLlBvbGljeURvY3VtZW50LlZlcnNpb24pLnRvQmUoJzIwMTItMTAtMTcnKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhdGVtZW50ID0gcG9saWN5LlByb3BlcnRpZXMuUG9saWN5RG9jdW1lbnQuU3RhdGVtZW50WzBdO1xuICAgICAgZXhwZWN0KHN0YXRlbWVudC5QcmluY2lwYWwuU2VydmljZSkudG9CZSgnbG9nZ2luZy5zMy5hbWF6b25hd3MuY29tJyk7XG4gICAgICBleHBlY3Qoc3RhdGVtZW50LkFjdGlvbikudG9FcXVhbChbJ3MzOlB1dE9iamVjdCddKTtcbiAgICAgIGV4cGVjdChzdGF0ZW1lbnQuQ29uZGl0aW9uLlN0cmluZ0VxdWFsc1snYXdzOlNvdXJjZUFjY291bnQnXSkudG9FcXVhbCh7ICdSZWYnOiAnQVdTOjpBY2NvdW50SWQnIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRUJTIEVuY3J5cHRpb24gTGFtYmRhIEZ1bmN0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIEVCU0VuY3J5cHRpb25MYW1iZGFSb2xlIHdpdGggcHJvcGVyIHBlcm1pc3Npb25zJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5FQlNFbmNyeXB0aW9uTGFtYmRhUm9sZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IHJvbGUgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuRUJTRW5jcnlwdGlvbkxhbWJkYVJvbGU7XG4gICAgICBcbiAgICAgIGV4cGVjdChyb2xlLlR5cGUpLnRvQmUoJ0FXUzo6SUFNOjpSb2xlJyk7XG4gICAgICBleHBlY3Qocm9sZS5Qcm9wZXJ0aWVzLk1hbmFnZWRQb2xpY3lBcm5zKS50b0NvbnRhaW4oJ2Fybjphd3M6aWFtOjphd3M6cG9saWN5L3NlcnZpY2Utcm9sZS9BV1NMYW1iZGFCYXNpY0V4ZWN1dGlvblJvbGUnKTtcbiAgICAgIFxuICAgICAgY29uc3QgcG9saWN5ID0gcm9sZS5Qcm9wZXJ0aWVzLlBvbGljaWVzWzBdO1xuICAgICAgZXhwZWN0KHBvbGljeS5Qb2xpY3lOYW1lKS50b0JlKCdFbmFibGVFQlNFbmNyeXB0aW9uJyk7XG4gICAgICBleHBlY3QocG9saWN5LlBvbGljeURvY3VtZW50LlN0YXRlbWVudFswXS5BY3Rpb24pLnRvRXF1YWwoW1xuICAgICAgICAnZWMyOkVuYWJsZUVic0VuY3J5cHRpb25CeURlZmF1bHQnLFxuICAgICAgICAnZWMyOkdldEVic0VuY3J5cHRpb25CeURlZmF1bHQnLFxuICAgICAgICAnZWMyOk1vZGlmeUVic0RlZmF1bHRLbXNLZXlJZCdcbiAgICAgIF0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgRUJTRW5jcnlwdGlvbkxhbWJkYSBmdW5jdGlvbicsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5SZXNvdXJjZXMuRUJTRW5jcnlwdGlvbkxhbWJkYSkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IGxhbWJkYSA9IHRlbXBsYXRlLlJlc291cmNlcy5FQlNFbmNyeXB0aW9uTGFtYmRhO1xuICAgICAgXG4gICAgICBleHBlY3QobGFtYmRhLlR5cGUpLnRvQmUoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KGxhbWJkYS5Qcm9wZXJ0aWVzLlJ1bnRpbWUpLnRvQmUoJ3B5dGhvbjMuOScpO1xuICAgICAgZXhwZWN0KGxhbWJkYS5Qcm9wZXJ0aWVzLkhhbmRsZXIpLnRvQmUoJ2luZGV4LmhhbmRsZXInKTtcbiAgICAgIGV4cGVjdChsYW1iZGEuUHJvcGVydGllcy5GdW5jdGlvbk5hbWUpLnRvRXF1YWwoeyAnRm46OlN1Yic6ICdFbmFibGVFQlNFbmNyeXB0aW9uLSR7RW52aXJvbm1lbnR9JyB9KTtcbiAgICAgIGV4cGVjdChsYW1iZGEuUHJvcGVydGllcy5UaW1lb3V0KS50b0JlKDYwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIEVuYWJsZUVCU0VuY3J5cHRpb24gY3VzdG9tIHJlc291cmNlJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5FbmFibGVFQlNFbmNyeXB0aW9uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgcmVzb3VyY2UgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuRW5hYmxlRUJTRW5jcnlwdGlvbjtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc291cmNlLlR5cGUpLnRvQmUoJ0N1c3RvbTo6RW5hYmxlRUJTRW5jcnlwdGlvbicpO1xuICAgICAgZXhwZWN0KHJlc291cmNlLlByb3BlcnRpZXMuU2VydmljZVRva2VuKS50b0VxdWFsKHsgJ0ZuOjpHZXRBdHQnOiBbJ0VCU0VuY3J5cHRpb25MYW1iZGEnLCAnQXJuJ10gfSk7XG4gICAgICBleHBlY3QocmVzb3VyY2UuUHJvcGVydGllcy5LbXNLZXlJZCkudG9FcXVhbCh7ICdGbjo6SWYnOiBbJ1VzZUN1c3RvbUtNUycsIHsgJ1JlZic6ICdLTVNLZXlBcm4nIH0sIHsgJ1JlZic6ICdBV1M6Ok5vVmFsdWUnIH1dIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSUFNIE1GQSBFbmZvcmNlbWVudCBQb2xpY3knLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgTUZBRW5mb3JjZW1lbnRQb2xpY3kgd2l0aCBjb21wcmVoZW5zaXZlIHJ1bGVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5NRkFFbmZvcmNlbWVudFBvbGljeSkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IHBvbGljeSA9IHRlbXBsYXRlLlJlc291cmNlcy5NRkFFbmZvcmNlbWVudFBvbGljeTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHBvbGljeS5UeXBlKS50b0JlKCdBV1M6OklBTTo6TWFuYWdlZFBvbGljeScpO1xuICAgICAgZXhwZWN0KHBvbGljeS5Qcm9wZXJ0aWVzLk1hbmFnZWRQb2xpY3lOYW1lKS50b0VxdWFsKHsgJ0ZuOjpTdWInOiAnUmVxdWlyZU1GQS0ke0Vudmlyb25tZW50fScgfSk7XG4gICAgICBleHBlY3QocG9saWN5LlByb3BlcnRpZXMuRGVzY3JpcHRpb24pLnRvQmUoJ0VuZm9yY2VzIE1GQSBmb3IgYWxsIElBTSB1c2VycycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgTUZBIHBvbGljeSBzdGF0ZW1lbnRzIGNvdmVyaW5nIGFsbCByZXF1aXJlZCBzY2VuYXJpb3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwb2xpY3kgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuTUZBRW5mb3JjZW1lbnRQb2xpY3k7XG4gICAgICBjb25zdCBzdGF0ZW1lbnRzID0gcG9saWN5LlByb3BlcnRpZXMuUG9saWN5RG9jdW1lbnQuU3RhdGVtZW50O1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RhdGVtZW50cykudG9IYXZlTGVuZ3RoKDQpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayB2aWV3IGFjY291bnQgaW5mbyBzdGF0ZW1lbnRcbiAgICAgIGNvbnN0IHZpZXdTdGF0ZW1lbnQgPSBzdGF0ZW1lbnRzLmZpbmQoKHM6IGFueSkgPT4gcy5TaWQgPT09ICdBbGxvd1ZpZXdBY2NvdW50SW5mbycpO1xuICAgICAgZXhwZWN0KHZpZXdTdGF0ZW1lbnQuRWZmZWN0KS50b0JlKCdBbGxvdycpO1xuICAgICAgZXhwZWN0KHZpZXdTdGF0ZW1lbnQuQWN0aW9uKS50b0NvbnRhaW4oJ2lhbTpHZXRBY2NvdW50UGFzc3dvcmRQb2xpY3knKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgbWFuYWdlIG93biBNRkEgc3RhdGVtZW50XG4gICAgICBjb25zdCBtYW5hZ2VTdGF0ZW1lbnQgPSBzdGF0ZW1lbnRzLmZpbmQoKHM6IGFueSkgPT4gcy5TaWQgPT09ICdBbGxvd01hbmFnZU93blBhc3N3b3Jkc0FuZE1GQScpO1xuICAgICAgZXhwZWN0KG1hbmFnZVN0YXRlbWVudC5FZmZlY3QpLnRvQmUoJ0FsbG93Jyk7XG4gICAgICBleHBlY3QobWFuYWdlU3RhdGVtZW50LkFjdGlvbikudG9Db250YWluKCdpYW06RW5hYmxlTUZBRGV2aWNlJyk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGRlbnkgd2l0aG91dCBNRkEgc3RhdGVtZW50XG4gICAgICBjb25zdCBkZW55U3RhdGVtZW50ID0gc3RhdGVtZW50cy5maW5kKChzOiBhbnkpID0+IHMuU2lkID09PSAnRGVueUFsbEV4Y2VwdExpc3RlZElmTm9NRkEnKTtcbiAgICAgIGV4cGVjdChkZW55U3RhdGVtZW50LkVmZmVjdCkudG9CZSgnRGVueScpO1xuICAgICAgZXhwZWN0KGRlbnlTdGF0ZW1lbnQuQ29uZGl0aW9uLkJvb2xJZkV4aXN0c1snYXdzOk11bHRpRmFjdG9yQXV0aFByZXNlbnQnXSkudG9CZSgnZmFsc2UnKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZGVueSBpZiBNRkEgdG9vIG9sZCBzdGF0ZW1lbnRcbiAgICAgIGNvbnN0IGFnZVN0YXRlbWVudCA9IHN0YXRlbWVudHMuZmluZCgoczogYW55KSA9PiBzLlNpZCA9PT0gJ0RlbnlJZk1GQVRvb09sZCcpO1xuICAgICAgZXhwZWN0KGFnZVN0YXRlbWVudC5FZmZlY3QpLnRvQmUoJ0RlbnknKTtcbiAgICAgIGV4cGVjdChhZ2VTdGF0ZW1lbnQuQ29uZGl0aW9uLk51bWVyaWNHcmVhdGVyVGhhblsnYXdzOk11bHRpRmFjdG9yQXV0aEFnZSddKS50b0VxdWFsKHsgJ1JlZic6ICdNRkFBZ2UnIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQVdTIENvbmZpZyBSZXNvdXJjZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgQ29uZmlnUmVjb3JkZXIgd2l0aCBwcm9wZXIgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5SZXNvdXJjZXMuQ29uZmlnUmVjb3JkZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCByZWNvcmRlciA9IHRlbXBsYXRlLlJlc291cmNlcy5Db25maWdSZWNvcmRlcjtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlY29yZGVyLlR5cGUpLnRvQmUoJ0FXUzo6Q29uZmlnOjpDb25maWd1cmF0aW9uUmVjb3JkZXInKTtcbiAgICAgIGV4cGVjdChyZWNvcmRlci5Qcm9wZXJ0aWVzLk5hbWUpLnRvRXF1YWwoeyAnRm46OlN1Yic6ICdFbmNyeXB0aW9uQ29tcGxpYW5jZVJlY29yZGVyLSR7RW52aXJvbm1lbnR9JyB9KTtcbiAgICAgIGV4cGVjdChyZWNvcmRlci5Qcm9wZXJ0aWVzLlJvbGVBUk4pLnRvRXF1YWwoeyAnRm46OkdldEF0dCc6IFsnQ29uZmlnUm9sZScsICdBcm4nXSB9KTtcbiAgICAgIGV4cGVjdChyZWNvcmRlci5Qcm9wZXJ0aWVzLlJlY29yZGluZ0dyb3VwLkFsbFN1cHBvcnRlZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZWNvcmRlci5Qcm9wZXJ0aWVzLlJlY29yZGluZ0dyb3VwLkluY2x1ZGVHbG9iYWxSZXNvdXJjZVR5cGVzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgQ29uZmlnRGVsaXZlcnlDaGFubmVsJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5Db25maWdEZWxpdmVyeUNoYW5uZWwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBjaGFubmVsID0gdGVtcGxhdGUuUmVzb3VyY2VzLkNvbmZpZ0RlbGl2ZXJ5Q2hhbm5lbDtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNoYW5uZWwuVHlwZSkudG9CZSgnQVdTOjpDb25maWc6OkRlbGl2ZXJ5Q2hhbm5lbCcpO1xuICAgICAgZXhwZWN0KGNoYW5uZWwuUHJvcGVydGllcy5TM0J1Y2tldE5hbWUpLnRvRXF1YWwoeyAnUmVmJzogJ0NvbmZpZ0J1Y2tldCcgfSk7XG4gICAgICBleHBlY3QoY2hhbm5lbC5Qcm9wZXJ0aWVzLlNuc1RvcGljQVJOKS50b0VxdWFsKHsgJ1JlZic6ICdDb25maWdTTlNUb3BpYycgfSk7XG4gICAgICBleHBlY3QoY2hhbm5lbC5Qcm9wZXJ0aWVzLkNvbmZpZ1NuYXBzaG90RGVsaXZlcnlQcm9wZXJ0aWVzLkRlbGl2ZXJ5RnJlcXVlbmN5KS50b0JlKCdUd2VudHlGb3VyX0hvdXJzJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBDb25maWdCdWNrZXQgd2l0aCBlbmNyeXB0aW9uIGFuZCBsaWZlY3ljbGUnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodGVtcGxhdGUuUmVzb3VyY2VzLkNvbmZpZ0J1Y2tldCkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IGJ1Y2tldCA9IHRlbXBsYXRlLlJlc291cmNlcy5Db25maWdCdWNrZXQ7XG4gICAgICBcbiAgICAgIGV4cGVjdChidWNrZXQuVHlwZSkudG9CZSgnQVdTOjpTMzo6QnVja2V0Jyk7XG4gICAgICBleHBlY3QoYnVja2V0LlByb3BlcnRpZXMuQnVja2V0TmFtZSkudG9FcXVhbCh7ICdGbjo6U3ViJzogJ2NvbmZpZy1idWNrZXQtJHtBV1M6OkFjY291bnRJZH0tJHtFbnZpcm9ubWVudH0nIH0pO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBlbmNyeXB0aW9uXG4gICAgICBleHBlY3QoYnVja2V0LlByb3BlcnRpZXMuQnVja2V0RW5jcnlwdGlvbi5TZXJ2ZXJTaWRlRW5jcnlwdGlvbkNvbmZpZ3VyYXRpb25bMF0uU2VydmVyU2lkZUVuY3J5cHRpb25CeURlZmF1bHQuU1NFQWxnb3JpdGhtKS50b0JlKCdBRVMyNTYnKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgbGlmZWN5Y2xlIC0gNyB5ZWFycyByZXRlbnRpb25cbiAgICAgIGV4cGVjdChidWNrZXQuUHJvcGVydGllcy5MaWZlY3ljbGVDb25maWd1cmF0aW9uLlJ1bGVzWzBdLkV4cGlyYXRpb25JbkRheXMpLnRvQmUoMjU1NSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBDb25maWdSb2xlIHdpdGggY29tcHJlaGVuc2l2ZSBwZXJtaXNzaW9ucycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5SZXNvdXJjZXMuQ29uZmlnUm9sZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IHJvbGUgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuQ29uZmlnUm9sZTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJvbGUuVHlwZSkudG9CZSgnQVdTOjpJQU06OlJvbGUnKTtcbiAgICAgIGV4cGVjdChyb2xlLlByb3BlcnRpZXMuQXNzdW1lUm9sZVBvbGljeURvY3VtZW50LlN0YXRlbWVudFswXS5QcmluY2lwYWwuU2VydmljZSkudG9CZSgnY29uZmlnLmFtYXpvbmF3cy5jb20nKTtcbiAgICAgIFxuICAgICAgY29uc3QgcG9saWN5ID0gcm9sZS5Qcm9wZXJ0aWVzLlBvbGljaWVzWzBdO1xuICAgICAgZXhwZWN0KHBvbGljeS5Qb2xpY3lOYW1lKS50b0JlKCdDb25maWdTZXJ2aWNlUm9sZVBvbGljeScpO1xuICAgICAgZXhwZWN0KHBvbGljeS5Qb2xpY3lEb2N1bWVudC5TdGF0ZW1lbnRbMF0uQWN0aW9uKS50b0NvbnRhaW4oJ2NvbmZpZzpQdXQqJyk7XG4gICAgICBleHBlY3QocG9saWN5LlBvbGljeURvY3VtZW50LlN0YXRlbWVudFswXS5BY3Rpb24pLnRvQ29udGFpbignczM6UHV0T2JqZWN0Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBV1MgQ29uZmlnIFJ1bGVzIGZvciBDb21wbGlhbmNlJywgKCkgPT4ge1xuICAgIGNvbnN0IGNvbmZpZ1J1bGVzID0gW1xuICAgICAgJ1MzQnVja2V0U1NMUmVxdWVzdHNPbmx5JyxcbiAgICAgICdTM0J1Y2tldFNlcnZlclNpZGVFbmNyeXB0aW9uJyxcbiAgICAgICdTM0RlZmF1bHRFbmNyeXB0aW9uS01TJyxcbiAgICAgICdFbmNyeXB0ZWRWb2x1bWVzJyxcbiAgICAgICdFQzJFQlNFbmNyeXB0aW9uQnlEZWZhdWx0JyxcbiAgICAgICdSRFNTdG9yYWdlRW5jcnlwdGVkJyxcbiAgICAgICdFRlNFbmNyeXB0ZWRDaGVjaycsXG4gICAgICAnSUFNVXNlck1GQUVuYWJsZWQnLFxuICAgICAgJ1Jvb3RBY2NvdW50TUZBRW5hYmxlZCdcbiAgICBdO1xuXG4gICAgY29uZmlnUnVsZXMuZm9yRWFjaChydWxlTmFtZSA9PiB7XG4gICAgICB0ZXN0KGBzaG91bGQgaGF2ZSAke3J1bGVOYW1lfSBDb25maWcgcnVsZWAsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlc1tydWxlTmFtZV0pLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGNvbnN0IHJ1bGUgPSB0ZW1wbGF0ZS5SZXNvdXJjZXNbcnVsZU5hbWVdO1xuICAgICAgICBcbiAgICAgICAgZXhwZWN0KHJ1bGUuVHlwZSkudG9CZSgnQVdTOjpDb25maWc6OkNvbmZpZ1J1bGUnKTtcbiAgICAgICAgZXhwZWN0KHJ1bGUuRGVwZW5kc09uKS50b0JlKCdDb25maWdSZWNvcmRlcicpO1xuICAgICAgICBleHBlY3QocnVsZS5Qcm9wZXJ0aWVzLlNvdXJjZS5Pd25lcikudG9CZSgnQVdTJyk7XG4gICAgICAgIGV4cGVjdChydWxlLlByb3BlcnRpZXMuRGVzY3JpcHRpb24pLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIFMzQnVja2V0U1NMUmVxdWVzdHNPbmx5IHdpdGggY29ycmVjdCBzb3VyY2UgaWRlbnRpZmllcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHJ1bGUgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuUzNCdWNrZXRTU0xSZXF1ZXN0c09ubHk7XG4gICAgICBleHBlY3QocnVsZS5Qcm9wZXJ0aWVzLlNvdXJjZS5Tb3VyY2VJZGVudGlmaWVyKS50b0JlKCdTM19CVUNLRVRfU1NMX1JFUVVFU1RTX09OTFknKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIEVDMkVCU0VuY3J5cHRpb25CeURlZmF1bHQgd2l0aCBjb3JyZWN0IHNvdXJjZSBpZGVudGlmaWVyJywgKCkgPT4ge1xuICAgICAgY29uc3QgcnVsZSA9IHRlbXBsYXRlLlJlc291cmNlcy5FQzJFQlNFbmNyeXB0aW9uQnlEZWZhdWx0O1xuICAgICAgZXhwZWN0KHJ1bGUuUHJvcGVydGllcy5Tb3VyY2UuU291cmNlSWRlbnRpZmllcikudG9CZSgnRUMyX0VCU19FTkNSWVBUSU9OX0JZX0RFRkFVTFQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIElBTVVzZXJNRkFFbmFibGVkIHdpdGggY29ycmVjdCBzb3VyY2UgaWRlbnRpZmllcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHJ1bGUgPSB0ZW1wbGF0ZS5SZXNvdXJjZXMuSUFNVXNlck1GQUVuYWJsZWQ7XG4gICAgICBleHBlY3QocnVsZS5Qcm9wZXJ0aWVzLlNvdXJjZS5Tb3VyY2VJZGVudGlmaWVyKS50b0JlKCdJQU1fVVNFUl9NRkFfRU5BQkxFRCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29uZm9ybWFuY2UgUGFjaycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBFbmNyeXB0aW9uQ29uZm9ybWFuY2VQYWNrJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5FbmNyeXB0aW9uQ29uZm9ybWFuY2VQYWNrKS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgcGFjayA9IHRlbXBsYXRlLlJlc291cmNlcy5FbmNyeXB0aW9uQ29uZm9ybWFuY2VQYWNrO1xuICAgICAgXG4gICAgICBleHBlY3QocGFjay5UeXBlKS50b0JlKCdBV1M6OkNvbmZpZzo6Q29uZm9ybWFuY2VQYWNrJyk7XG4gICAgICBleHBlY3QocGFjay5EZXBlbmRzT24pLnRvRXF1YWwoWydDb25maWdSZWNvcmRlcicsICdDb25maWdEZWxpdmVyeUNoYW5uZWwnXSk7XG4gICAgICBleHBlY3QocGFjay5Qcm9wZXJ0aWVzLkNvbmZvcm1hbmNlUGFja05hbWUpLnRvRXF1YWwoeyAnRm46OlN1Yic6ICdlbmNyeXB0aW9uLWNvbXBsaWFuY2UtcGFjay0ke0Vudmlyb25tZW50fScgfSk7XG4gICAgICBleHBlY3QocGFjay5Qcm9wZXJ0aWVzLlRlbXBsYXRlQm9keSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ091dHB1dHMgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBhbGwgcmVxdWlyZWQgb3V0cHV0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGV4cGVjdGVkT3V0cHV0cyA9IFtcbiAgICAgICAgJ0FwcGxpY2F0aW9uRGF0YUJ1Y2tldE5hbWUnLFxuICAgICAgICAnTG9nZ2luZ0J1Y2tldE5hbWUnLCBcbiAgICAgICAgJ0tNU0tleUlkJyxcbiAgICAgICAgJ01GQVBvbGljeUFybicsXG4gICAgICAgICdDb25maWdSZWNvcmRlck5hbWUnLFxuICAgICAgICAnQ29tcGxpYW5jZVN0YXR1cydcbiAgICAgIF07XG5cbiAgICAgIGV4cGVjdGVkT3V0cHV0cy5mb3JFYWNoKG91dHB1dE5hbWUgPT4ge1xuICAgICAgICBleHBlY3QodGVtcGxhdGUuT3V0cHV0c1tvdXRwdXROYW1lXSkudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgQXBwbGljYXRpb25EYXRhQnVja2V0TmFtZSBvdXRwdXQgd2l0aCBleHBvcnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvdXRwdXQgPSB0ZW1wbGF0ZS5PdXRwdXRzLkFwcGxpY2F0aW9uRGF0YUJ1Y2tldE5hbWU7XG4gICAgICBleHBlY3Qob3V0cHV0LkRlc2NyaXB0aW9uKS50b0JlKCdOYW1lIG9mIHRoZSBlbmNyeXB0ZWQgYXBwbGljYXRpb24gZGF0YSBidWNrZXQnKTtcbiAgICAgIGV4cGVjdChvdXRwdXQuVmFsdWUpLnRvRXF1YWwoeyAnUmVmJzogJ0FwcGxpY2F0aW9uRGF0YUJ1Y2tldCcgfSk7XG4gICAgICBleHBlY3Qob3V0cHV0LkV4cG9ydC5OYW1lKS50b0VxdWFsKHsgJ0ZuOjpTdWInOiAnJHtBV1M6OlN0YWNrTmFtZX0tQXBwQnVja2V0JyB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIEtNU0tleUlkIG91dHB1dCB3aXRoIGNvbmRpdGlvbmFsIHZhbHVlJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb3V0cHV0ID0gdGVtcGxhdGUuT3V0cHV0cy5LTVNLZXlJZDtcbiAgICAgIGV4cGVjdChvdXRwdXQuRGVzY3JpcHRpb24pLnRvQmUoJ0tNUyBLZXkgSUQgZm9yIGVuY3J5cHRpb24nKTtcbiAgICAgIGV4cGVjdChvdXRwdXQuVmFsdWUpLnRvRXF1YWwoeyAnRm46OklmJzogWydVc2VDdXN0b21LTVMnLCB7ICdSZWYnOiAnS01TS2V5QXJuJyB9LCB7ICdSZWYnOiAnRW5jcnlwdGlvbktleScgfV0gfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBDb21wbGlhbmNlU3RhdHVzIG91dHB1dCB3aXRoIENvbmZpZyBjb25zb2xlIFVSTCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG91dHB1dCA9IHRlbXBsYXRlLk91dHB1dHMuQ29tcGxpYW5jZVN0YXR1cztcbiAgICAgIGV4cGVjdChvdXRwdXQuRGVzY3JpcHRpb24pLnRvQmUoJ0NoZWNrIENvbmZpZyBSdWxlcyBkYXNoYm9hcmQgZm9yIGNvbXBsaWFuY2Ugc3RhdHVzJyk7XG4gICAgICBleHBlY3Qob3V0cHV0LlZhbHVlKS50b0VxdWFsKHsgJ0ZuOjpTdWInOiAnaHR0cHM6Ly9jb25zb2xlLmF3cy5hbWF6b24uY29tL2NvbmZpZy9ob21lP3JlZ2lvbj0ke0FXUzo6UmVnaW9ufSMvcnVsZXMnIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVzb3VyY2UgQ291bnQgYW5kIFN0cnVjdHVyZSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIGNvcnJlY3QgbnVtYmVyIG9mIHJlc291cmNlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc291cmNlQ291bnQgPSBPYmplY3Qua2V5cyh0ZW1wbGF0ZS5SZXNvdXJjZXMpLmxlbmd0aDtcbiAgICAgIGV4cGVjdChyZXNvdXJjZUNvdW50KS50b0JlKDI2KTsgLy8gQWxsIGVuY3J5cHRpb24sIE1GQSwgYW5kIENvbmZpZyByZXNvdXJjZXNcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIGNvcnJlY3QgbnVtYmVyIG9mIHBhcmFtZXRlcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbWV0ZXJDb3VudCA9IE9iamVjdC5rZXlzKHRlbXBsYXRlLlBhcmFtZXRlcnMpLmxlbmd0aDtcbiAgICAgIGV4cGVjdChwYXJhbWV0ZXJDb3VudCkudG9CZSgzKTsgLy8gRW52aXJvbm1lbnQsIE1GQUFnZSwgS01TS2V5QXJuXG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBjb3JyZWN0IG51bWJlciBvZiBjb25kaXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZGl0aW9uQ291bnQgPSBPYmplY3Qua2V5cyh0ZW1wbGF0ZS5Db25kaXRpb25zKS5sZW5ndGg7XG4gICAgICBleHBlY3QoY29uZGl0aW9uQ291bnQpLnRvQmUoMik7IC8vIFVzZUN1c3RvbUtNUywgVXNlRGVmYXVsdEtNU1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgY29ycmVjdCBudW1iZXIgb2Ygb3V0cHV0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IG91dHB1dENvdW50ID0gT2JqZWN0LmtleXModGVtcGxhdGUuT3V0cHV0cykubGVuZ3RoO1xuICAgICAgZXhwZWN0KG91dHB1dENvdW50KS50b0JlKDYpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VjdXJpdHkgYW5kIENvbXBsaWFuY2UgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdhbGwgUzMgYnVja2V0cyBzaG91bGQgaGF2ZSBlbmNyeXB0aW9uIGNvbmZpZ3VyZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzM0J1Y2tldHMgPSBbJ0FwcGxpY2F0aW9uRGF0YUJ1Y2tldCcsICdMb2dnaW5nQnVja2V0JywgJ0NvbmZpZ0J1Y2tldCddO1xuICAgICAgXG4gICAgICBzM0J1Y2tldHMuZm9yRWFjaChidWNrZXROYW1lID0+IHtcbiAgICAgICAgY29uc3QgYnVja2V0ID0gdGVtcGxhdGUuUmVzb3VyY2VzW2J1Y2tldE5hbWVdO1xuICAgICAgICBleHBlY3QoYnVja2V0LlByb3BlcnRpZXMuQnVja2V0RW5jcnlwdGlvbikudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGJ1Y2tldC5Qcm9wZXJ0aWVzLkJ1Y2tldEVuY3J5cHRpb24uU2VydmVyU2lkZUVuY3J5cHRpb25Db25maWd1cmF0aW9uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdhbGwgUzMgYnVja2V0cyBzaG91bGQgYmxvY2sgcHVibGljIGFjY2VzcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHMzQnVja2V0cyA9IFsnQXBwbGljYXRpb25EYXRhQnVja2V0JywgJ0xvZ2dpbmdCdWNrZXQnLCAnQ29uZmlnQnVja2V0J107XG4gICAgICBcbiAgICAgIHMzQnVja2V0cy5mb3JFYWNoKGJ1Y2tldE5hbWUgPT4ge1xuICAgICAgICBjb25zdCBidWNrZXQgPSB0ZW1wbGF0ZS5SZXNvdXJjZXNbYnVja2V0TmFtZV07XG4gICAgICAgIGNvbnN0IHB1YmxpY0FjY2VzcyA9IGJ1Y2tldC5Qcm9wZXJ0aWVzLlB1YmxpY0FjY2Vzc0Jsb2NrQ29uZmlndXJhdGlvbjtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChwdWJsaWNBY2Nlc3MuQmxvY2tQdWJsaWNBY2xzKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocHVibGljQWNjZXNzLkJsb2NrUHVibGljUG9saWN5KS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocHVibGljQWNjZXNzLklnbm9yZVB1YmxpY0FjbHMpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChwdWJsaWNBY2Nlc3MuUmVzdHJpY3RQdWJsaWNCdWNrZXRzKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdLTVMga2V5IHNob3VsZCBoYXZlIGtleSByb3RhdGlvbiBlbmFibGVkJywgKCkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gdGVtcGxhdGUuUmVzb3VyY2VzLkVuY3J5cHRpb25LZXk7XG4gICAgICBleHBlY3Qoa2V5LlByb3BlcnRpZXMuRW5hYmxlS2V5Um90YXRpb24pLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdDb25maWcgU05TIHRvcGljIHNob3VsZCBiZSBlbmNyeXB0ZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b3BpYyA9IHRlbXBsYXRlLlJlc291cmNlcy5Db25maWdTTlNUb3BpYztcbiAgICAgIGV4cGVjdCh0b3BpYy5Qcm9wZXJ0aWVzLkttc01hc3RlcktleUlkKS50b0VxdWFsKHsgJ0ZuOjpJZic6IFsnVXNlQ3VzdG9tS01TJywgeyAnUmVmJzogJ0tNU0tleUFybicgfSwgeyAnUmVmJzogJ0VuY3J5cHRpb25LZXknIH1dIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGVtcGxhdGUgTmFtaW5nIENvbnZlbnRpb25zJywgKCkgPT4ge1xuICAgIHRlc3QoJ2FsbCByZXNvdXJjZXMgc2hvdWxkIGZvbGxvdyBjb25zaXN0ZW50IG5hbWluZyBwYXR0ZXJucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc291cmNlc1dpdGhFbnZpcm9ubWVudE5hbWluZyA9IFtcbiAgICAgICAgJ0VCU0VuY3J5cHRpb25MYW1iZGEnLFxuICAgICAgICAnTUZBRW5mb3JjZW1lbnRQb2xpY3knLFxuICAgICAgICAnQ29uZmlnUmVjb3JkZXInLFxuICAgICAgICAnQ29uZmlnRGVsaXZlcnlDaGFubmVsJyxcbiAgICAgICAgJ0VuY3J5cHRpb25Db25mb3JtYW5jZVBhY2snXG4gICAgICBdO1xuICAgICAgXG4gICAgICByZXNvdXJjZXNXaXRoRW52aXJvbm1lbnROYW1pbmcuZm9yRWFjaChyZXNvdXJjZU5hbWUgPT4ge1xuICAgICAgICBjb25zdCByZXNvdXJjZSA9IHRlbXBsYXRlLlJlc291cmNlc1tyZXNvdXJjZU5hbWVdO1xuICAgICAgICBjb25zdCBuYW1lUHJvcGVydHkgPSByZXNvdXJjZS5Qcm9wZXJ0aWVzLkZ1bmN0aW9uTmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZS5Qcm9wZXJ0aWVzLk1hbmFnZWRQb2xpY3lOYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlLlByb3BlcnRpZXMuTmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlLlByb3BlcnRpZXMuQ29uZm9ybWFuY2VQYWNrTmFtZTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChuYW1lUHJvcGVydHkpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShuYW1lUHJvcGVydHkpKS50b0NvbnRhaW4oJyR7RW52aXJvbm1lbnR9Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2FsbCBidWNrZXQgbmFtZXMgc2hvdWxkIGluY2x1ZGUgQWNjb3VudElkIGFuZCBFbnZpcm9ubWVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGJ1Y2tldFJlc291cmNlcyA9IFsnQXBwbGljYXRpb25EYXRhQnVja2V0JywgJ0xvZ2dpbmdCdWNrZXQnLCAnQ29uZmlnQnVja2V0J107XG4gICAgICBcbiAgICAgIGJ1Y2tldFJlc291cmNlcy5mb3JFYWNoKGJ1Y2tldE5hbWUgPT4ge1xuICAgICAgICBjb25zdCBidWNrZXQgPSB0ZW1wbGF0ZS5SZXNvdXJjZXNbYnVja2V0TmFtZV07XG4gICAgICAgIGNvbnN0IGJ1Y2tldE5hbWVTdWIgPSBidWNrZXQuUHJvcGVydGllcy5CdWNrZXROYW1lO1xuICAgICAgICBcbiAgICAgICAgZXhwZWN0KGJ1Y2tldE5hbWVTdWJbJ0ZuOjpTdWInXSkudG9Db250YWluKCcke0FXUzo6QWNjb3VudElkfScpO1xuICAgICAgICBleHBlY3QoYnVja2V0TmFtZVN1YlsnRm46OlN1YiddKS50b0NvbnRhaW4oJyR7RW52aXJvbm1lbnR9Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXX0=